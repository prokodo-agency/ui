var L=Object.defineProperty;var n=(e,t)=>L(e,"name",{value:t,configurable:true});import{j as w}from"./jsx-runtime-CGXnEs--.js";import{r as l}from"./index-Dko9tpwX.js";import{i as P,c as A}from"./validations-hwxYw-LN.js";import{S as C}from"./Skeleton-DZFb9hKt.js";function D(e,t){e.src=t}n(D,"setScriptSrc");const x=n(e=>{var t;var r;var a;var c="The Google Maps JavaScript API";var s="google";var p="importLibrary";var g="__ib__";var b=document;var d=window;var f=d[s]||(d[s]={});var i=f.maps||(f.maps={});var u=new Set;var o=new URLSearchParams;var h=n(()=>t||(t=new Promise(async(m,y)=>{var v;await(r=b.createElement("script"));o.set("libraries",[...u]+"");for(a in e){o.set(a.replace(/[A-Z]/g,T=>"_"+T[0].toLowerCase()),e[a])}o.set("callback",s+".maps."+g);D(r,"https://maps.googleapis.com/maps/api/js?"+o);i[g]=m;r.onerror=()=>t=y(Error(c+" could not load."));r.nonce=((v=b.querySelector("script[nonce]"))==null?void 0:v.nonce)||"";b.head.append(r)})),"triggerBootstrap");i[p]?console.warn(c+" only loads once. Ignoring:",e):i[p]=(m,...y)=>u.add(m)&&h().then(()=>i[p](m,...y))},"bootstrap");const R=n(e=>`The setOptions() function should only be called once. The options passed to the additional call (${JSON.stringify(e)}) will be ignored.`,"MSG_REPEATED_SET_OPTIONS");const N=n(e=>`The google.maps.importLibrary() function is already defined, and @googlemaps/js-api-loader will use the existing function instead of overwriting it. The options passed to setOptions (${JSON.stringify(e)}) will be ignored.`,"MSG_IMPORT_LIBRARY_EXISTS");const G=n(()=>{},"logDevWarning");const j=n(()=>{},"logDevNotice");let E=false;function q(e){if(E){G(R(e));return}V(e);E=true}n(q,"setOptions");async function S(e){var t,r;if(!((r=(t=window==null?void 0:window.google)==null?void 0:t.maps)==null?void 0:r.importLibrary)){throw new Error("google.maps.importLibrary is not installed.")}return await google.maps.importLibrary(e)}n(S,"importLibrary");function V(e){var r,a;const t=Boolean((a=(r=window.google)==null?void 0:r.maps)==null?void 0:a.importLibrary);if(t){j(N(e))}if(!t){x(e)}}n(V,"installImportLibrary_");const K=n((e,t)=>{const[r,a]=l.useState(false);l.useEffect(()=>{const c=n(async()=>{q({key:e,libraries:["maps"]});await S("maps");await S("marker").then(()=>{a(true)}).catch(s=>{console.error("Error loading Google Maps",s)})},"loader");void c()},[e,t]);return r},"useGoogleMaps");const M=l.memo(({apiKey:e,mapId:t,center:r,marker:a,zoom:c=8})=>{const s=l.useRef(null);const p=l.useRef(null);const[g,b]=l.useState(typeof document!=="undefined"?document.documentElement.getAttribute("data-theme")==="dark":false);const d=l.useCallback(()=>{if(!(s==null?void 0:s.current))return;const i={center:r,zoom:c,mapId:P(t)?t:g===true?"c3c70a1ea4c4b0b8":"e5921eca3f70ade2",disableDefaultUI:true,mapTypeControl:false,fullscreenControl:false,streetViewControl:false,zoomControl:true};const u=new google.maps.Map(s.current,i);p.current=u;if(!A(a))return;a.forEach(o=>{var m,y;if(typeof((m=o==null?void 0:o.position)==null?void 0:m.lat)==="number"||typeof((y=o==null?void 0:o.position)==null?void 0:y.lng)==="number")return;const h=document.createElement("img");h.src="/images/prokodo-map-marker.webp";new google.maps.marker.AdvancedMarkerElement({map:u,content:h,...o})})},[g,t,r,a,c]);const f=K(e,g);l.useEffect(()=>{if(!f||p.current)return;d()},[f,d]);l.useEffect(()=>{const i=new MutationObserver(()=>{const u=document.documentElement.getAttribute("data-theme");b(u==="dark");p.current=null;d()});i.observe(document.documentElement,{attributes:true,attributeFilter:["data-theme"]});return()=>i.disconnect()},[d]);if(!f){return w.jsx(C,{height:"500px",width:"100%"})}return w.jsx("div",{ref:s,style:{width:"100%",height:"500px"}})});M.displayName="Map";try{M.displayName="Map";M.__docgenInfo={"description":"","displayName":"Map","props":{"apiKey":{"defaultValue":null,"description":"Google Maps API key.","name":"apiKey","required":true,"type":{"name":"string"}},"mapId":{"defaultValue":null,"description":"Optional Map ID for advanced styling.","name":"mapId","required":false,"type":{"name":"string"}},"center":{"defaultValue":null,"description":"Center coordinates.","name":"center","required":true,"type":{"name":"MapCenter"}},"marker":{"defaultValue":null,"description":"Marker list.","name":"marker","required":false,"type":{"name":"MapMarker[]"}},"zoom":{"defaultValue":null,"description":"Zoom level.","name":"zoom","required":false,"type":{"name":"number"}},"heading":{"defaultValue":null,"description":"Camera heading in degrees.","name":"heading","required":false,"type":{"name":"number"}},"tilt":{"defaultValue":null,"description":"Camera tilt in degrees.","name":"tilt","required":false,"type":{"name":"number"}}}}}catch(e){}const B={title:"prokodo/service/Map",component:M,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}};const _={args:{apiKey:"",center:{lat:48.13913,lng:11.58022},marker:[{position:{lat:48.13913,lng:11.58022}},{position:{lat:48.141904,lng:11.600267}},{position:{lat:48.149234,lng:11.579997}},{position:{lat:48.132052,lng:11.560758}}]}};var k,O,I;_.parameters={..._.parameters,docs:{...(k=_.parameters)==null?void 0:k.docs,source:{originalSource:'{\n  args: {\n    apiKey: "",\n    center: {\n      lat: 48.13913,\n      lng: 11.58022\n    },\n    marker: ([{\n      position: {\n        lat: 48.13913,\n        lng: 11.58022\n      }\n    }, {\n      position: {\n        lat: 48.141904,\n        lng: 11.600267\n      }\n    }, {\n      position: {\n        lat: 48.149234,\n        lng: 11.579997\n      }\n    }, {\n      position: {\n        lat: 48.132052,\n        lng: 11.560758\n      }\n    }] as MapMarker[])\n  }\n}',...(I=(O=_.parameters)==null?void 0:O.docs)==null?void 0:I.source}}};const z=["Default"];const $=Object.freeze(Object.defineProperty({__proto__:null,Default:_,__namedExportsOrder:z,default:B},Symbol.toStringTag,{value:"Module"}));export{_ as D,$ as M};
