var w=Object.defineProperty;var r=(o,s)=>w(o,"name",{value:s,configurable:true});import{c as E}from"./createLazyWrapper-D1NyvZjw.js";import{j as p}from"./jsx-runtime-CGXnEs--.js";import{r as a}from"./index-DGnhqvo7.js";import{i as l}from"./validations-hwxYw-LN.js";import{A as I}from"./Animated-BytynYqd.js";import{L as F}from"./Loading-BUVFWPJR.js";import{C as A}from"./Calendly.stories-Bo8iidFV.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-BXnYb3Ft.js";import"../sb-preview/runtime.js";import"./createIsland-CYXQRK9I.js";import"./bem-DSWMYwqE.js";let f=false;function j(o){const{calendlyId:s,data:t,colors:n={text:"#4D4D4D",button:"#1E90FF",background:"#FFFFFF"},animationProps:S,hideLoading:k,hideCookieSettings:y,hideEventTypeDetails:g,hideDetails:C,...D}=o;const u=a.useRef(null);const[d,V]=a.useState(false);const[_,h]=a.useState(f);const c=r(e=>e==null?void 0:e.replaceAll("#",""),"format");const b=a.useCallback(()=>{const e={};if(!t)return e;for(const i of["name","email","firstName","lastName"]){if(l(t[i]))e[i]=t[i]}return e},[t]);const m=a.useMemo(()=>{const e=new URLSearchParams;if(Boolean(C))e.set("hide_landing_page_details","1");if(Boolean(g))e.set("hide_event_type_details","1");if(Boolean(y))e.set("hide_gdpr_banner","1");if(l(n.background))e.set("background_color",c(n==null?void 0:n.background));if(l(n.text))e.set("text_color",c(n.text));if(l(n.button))e.set("primary_color",c(n.button));if(l(t==null?void 0:t.utm_campaign))e.set("utm_campaign",(t==null?void 0:t.utm_campaign)??"");if(l(t==null?void 0:t.utm_source))e.set("utm_source",(t==null?void 0:t.utm_source)??"");return`https://calendly.com/${s}?${e.toString()}`},[s,n,t,C,g,y]);const q=a.useCallback(e=>{if(!e||!_||d)return;const i=r((x=0)=>{var L;if(window.Calendly){(L=u.current)==null?void 0:L.setAttribute("data-url",m);window.Calendly.initInlineWidget({url:m,parentElement:u.current,prefill:b()});V(true);return}if(x<10)setTimeout(()=>i(x+1),100);else console.warn("Calendly widget failed to load.")},"tryInit");i()},[_,d,m,b]);a.useEffect(()=>{if(f||typeof document==="undefined"){h(true);return}const e=document.createElement("script");e.src="https://assets.calendly.com/assets/external/widget.js";e.async=true;e.onload=()=>{f=true;h(true)};document.body.appendChild(e)},[]);const v={display:d?"block":"none",minWidth:320,height:700};return p.jsxs(I,{...S,onAnimate:q,children:[!Boolean(k)&&!d&&p.jsx(F,{}),p.jsx("div",{ref:u,...D,style:v})]})}r(j,"CalendlyClient");try{Calendlyclient.displayName="Calendlyclient";Calendlyclient.__docgenInfo={"description":"","displayName":"Calendlyclient","props":{"calendlyId":{"defaultValue":null,"description":"","name":"calendlyId","required":true,"type":{"name":"string"}},"data":{"defaultValue":null,"description":"","name":"data","required":false,"type":{"name":"CalendlyData"}},"animationProps":{"defaultValue":null,"description":"","name":"animationProps","required":false,"type":{"name":"AnimatedProps"}},"colors":{"defaultValue":null,"description":"","name":"colors","required":false,"type":{"name":"CalendlyColorOptions"}},"hideLoading":{"defaultValue":null,"description":"","name":"hideLoading","required":false,"type":{"name":"boolean"}},"hideCookieSettings":{"defaultValue":null,"description":"","name":"hideCookieSettings","required":false,"type":{"name":"boolean"}},"hideEventTypeDetails":{"defaultValue":null,"description":"","name":"hideEventTypeDetails","required":false,"type":{"name":"boolean"}},"hideDetails":{"defaultValue":null,"description":"","name":"hideDetails","required":false,"type":{"name":"boolean"}},"LoadingComponent":{"defaultValue":null,"description":"","name":"LoadingComponent","required":false,"type":{"name":"ComponentType<{}>"}}}}}catch(o){}const J=E({name:"Calendly",Client:j,Server:A,hydrateOnVisible:true,isInteractive:r(()=>true,"isInteractive")});export{J as default};
