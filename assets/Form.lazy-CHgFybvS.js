import{c as P}from"./createLazyWrapper-D1NyvZjw.js";import{j}from"./jsx-runtime-CGXnEs--.js";import{r as n}from"./index-DGnhqvo7.js";import{i as q}from"./validations-hwxYw-LN.js";import{F as A,a as R}from"./Form.stories-C2HOh18B.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./DatePicker-CHnl9o4j.js";import"./iframe-pVJNAvW9.js";import"../sb-preview/runtime.js";import"./createIsland-CYXQRK9I.js";import"./Input.view-CuKm5CGW.js";import"./Label-jfDotQ8L.js";import"./bem-DSWMYwqE.js";import"./Input-UPYnl9rM.js";import"./Select-BSePABZe.js";import"./Slider-BGiotrE3.js";import"./Switch-BlozSkZu.js";import"./Icon-BbQCOC9D.js";import"./GridRow-CP1VB4RI.js";import"./List-BXtRqAmA.js";import"./Card-3s7Q4EST.js";import"./Animated-DZXD5Bq3.js";import"./Skeleton-CpnmdvhB.js";import"./Image-DZ0GyQwx.js";import"./Link-C1hIXDBf.js";import"./Link.server-C7haGjkb.js";import"./BaseLink.server-BHNNn_tQ.js";import"./Button-Dkf6Xtil.js";import"./Headline-CJp3wWK6.js";import"./AnimatedText-DAWPefNm.js";const f=n.memo(h=>{const{disabled:v,fields:C,defaultFields:m,messages:d,onSubmit:p,onChangeForm:y,messagesFields:c,hideResponse:b,...V}=h;const[o,x]=n.useState(C??[]);const[S,F]=n.useState(d);const[T,_]=n.useState("");n.useEffect(()=>{if(d!==void 0){F(d)}},[d]);const s=n.useCallback((e,r)=>{x(i=>{const t=[...i];t[e]={...t[e],...r};return t});if(y){y({...o[e],...r})}},[o,y]);const k=n.useCallback((e,r)=>{if(e.errorText===r){return}const i=o.findIndex(t=>(t==null?void 0:t.name)===(e==null?void 0:e.name));if(i<0)return;s(i,{errorText:r});F(t=>{const a={...(t==null?void 0:t.errors)??{}};if(q(r)){a[e.label??""]=[r]}else{delete a[e.label??""]}return{errors:Object.keys(a).length>0?a:void 0}})},[o,s]);const E=n.useCallback((e,r)=>{const i=o.findIndex(a=>a.name===e.name);if(i<0)return;if(!e.conditions||e.conditions.length===0){s(i,{value:r});return}m==null?void 0:m.forEach((a,l)=>{var u;if(Boolean((u=a.conditions)==null?void 0:u.some(I=>I.fieldId===e.name))){s(l,m[l])}});const t=(e.conditions??[]).filter(a=>{if(r===void 0||a.equalTo===void 0)return true;if(typeof a.equalTo==="boolean"&&a.equalTo===r){return true}if(typeof a.equalTo==="string"){return a.equalTo===r}if(Array.isArray(a.equalTo)&&typeof r==="string"){return a.equalTo.includes(r)}return false});t.forEach(a=>{const l=o.findIndex(u=>u.name===a.fieldId);if(l>=0){s(l,a.updateProps)}});s(i,{value:r})},[m,o,s]);const M=n.useCallback(e=>{_(e.target.value)},[]);const g=n.useCallback(()=>{const e={};o.forEach(r=>{var i,t,a,l;if(Boolean(r.required)&&(r.value===void 0||r.value===""||Array.isArray(r.value)&&r.value.length===0)&&r.visible!==false){const u=((t=(i=c==null?void 0:c.errors)==null?void 0:i.input)==null?void 0:t["required"])??"This field is required";if(!e[r.label??""]){e[r.label??""]=[]}(a=e[r.label??""])==null?void 0:a.push(u)}if(q(r.errorText)){if(!e[r.label??""]){e[r.label??""]=[]}(l=e[r.label??""])==null?void 0:l.push(r.errorText)}});return{errors:Object.keys(e).length>0?e:void 0}},[o,c]);const B=n.useCallback(e=>{e.preventDefault();const{errors:r}=g();F({errors:r});if(!r){p==null?void 0:p(o)}},[o,p,g]);const H=n.useMemo(()=>{if(Boolean(b)){return o.every(e=>{if(Boolean(e.required)&&e.value===void 0&&Boolean(e.visible)!==false){return false}return true})}return true},[o,b]);return j.jsx(A,{...V,disabled:v,formMessages:S,formState:o,isFormValid:H,fieldProps:{onChange:E,onValidate:k},honeypot:{value:T,onChange:M},onFormSubmit:B})});f.displayName="FormClient";try{f.displayName="FormClient";f.__docgenInfo={"description":"","displayName":"FormClient","props":{"label":{"defaultValue":null,"description":"","name":"label","required":true,"type":{"name":"string"}},"disabled":{"defaultValue":null,"description":"","name":"disabled","required":false,"type":{"name":"boolean"}},"variant":{"defaultValue":null,"description":"","name":"variant","required":false,"type":{"name":"enum","value":[{"value":'"inherit"'},{"value":'"primary"'},{"value":'"secondary"'},{"value":'"success"'},{"value":'"error"'},{"value":'"info"'},{"value":'"warning"'}]}},"hideResponse":{"defaultValue":null,"description":"","name":"hideResponse","required":false,"type":{"name":"boolean"}},"fields":{"defaultValue":null,"description":"","name":"fields","required":false,"type":{"name":"FormField[]"}},"hideHeadline":{"defaultValue":null,"description":"","name":"hideHeadline","required":false,"type":{"name":"boolean"}},"headlineProps":{"defaultValue":null,"description":"","name":"headlineProps","required":false,"type":{"name":"HeadlineProps"}},"defaultFields":{"defaultValue":null,"description":"","name":"defaultFields","required":false,"type":{"name":"FormField[]"}},"messages":{"defaultValue":null,"description":"","name":"messages","required":false,"type":{"name":"FormMessages"}},"messagesFields":{"defaultValue":null,"description":"","name":"messagesFields","required":false,"type":{"name":"FormFieldMessages"}},"button":{"defaultValue":null,"description":"","name":"button","required":true,"type":{"name":"FormButton"}},"onSubmit":{"defaultValue":null,"description":"","name":"onSubmit","required":false,"type":{"name":"((fields: FormField[]) => void)"}},"onChangeForm":{"defaultValue":null,"description":"","name":"onChangeForm","required":false,"type":{"name":"OnChangeFormHandler"}}}}}catch(h){}const fe=P({name:"Form",Client:f,Server:R});export{fe as default};
