var L=Object.defineProperty;var n=(e,t)=>L(e,"name",{value:t,configurable:true});import{j as v}from"./jsx-runtime-CGXnEs--.js";import{r as l}from"./index-Dko9tpwX.js";import{i as A,c as P}from"./validations-hwxYw-LN.js";import{S as x}from"./Skeleton-Cp6k761R.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./bem-DSWMYwqE.js";function R(e,t){e.src=t}n(R,"setScriptSrc");const D=n(e=>{var t;var r;var a;var p="The Google Maps JavaScript API";var o="google";var c="importLibrary";var g="__ib__";var b=document;var u=window;var f=u[o]||(u[o]={});var i=f.maps||(f.maps={});var m=new Set;var s=new URLSearchParams;var h=n(()=>t||(t=new Promise(async(d,y)=>{var E;await(r=b.createElement("script"));s.set("libraries",[...m]+"");for(a in e){s.set(a.replace(/[A-Z]/g,I=>"_"+I[0].toLowerCase()),e[a])}s.set("callback",o+".maps."+g);R(r,"https://maps.googleapis.com/maps/api/js?"+s);i[g]=d;r.onerror=()=>t=y(Error(p+" could not load."));r.nonce=((E=b.querySelector("script[nonce]"))==null?void 0:E.nonce)||"";b.head.append(r)})),"triggerBootstrap");i[c]?console.warn(p+" only loads once. Ignoring:",e):i[c]=(d,...y)=>m.add(d)&&h().then(()=>i[c](d,...y))},"bootstrap");const N=n(e=>`The setOptions() function should only be called once. The options passed to the additional call (${JSON.stringify(e)}) will be ignored.`,"MSG_REPEATED_SET_OPTIONS");const C=n(e=>`The google.maps.importLibrary() function is already defined, and @googlemaps/js-api-loader will use the existing function instead of overwriting it. The options passed to setOptions (${JSON.stringify(e)}) will be ignored.`,"MSG_IMPORT_LIBRARY_EXISTS");const G=n(()=>{},"logDevWarning");const q=n(()=>{},"logDevNotice");let M=false;function V(e){if(M){G(N(e));return}j(e);M=true}n(V,"setOptions");async function S(e){var t,r;if(!((r=(t=window==null?void 0:window.google)==null?void 0:t.maps)==null?void 0:r.importLibrary)){throw new Error("google.maps.importLibrary is not installed.")}return await google.maps.importLibrary(e)}n(S,"importLibrary");function j(e){var r,a;const t=Boolean((a=(r=window.google)==null?void 0:r.maps)==null?void 0:a.importLibrary);if(t){q(C(e))}if(!t){D(e)}}n(j,"installImportLibrary_");const K=n((e,t)=>{const[r,a]=l.useState(false);l.useEffect(()=>{const p=n(async()=>{V({key:e,libraries:["maps"]});await S("maps");await S("marker").then(()=>{a(true)}).catch(o=>{console.error("Error loading Google Maps",o);throw new Error("Error loading Google Map: ",o)})},"loader");void p()},[e,t]);return r},"useGoogleMaps");const _=l.memo(({apiKey:e,mapId:t,center:r,marker:a,zoom:p=8})=>{const o=l.useRef(null);const c=l.useRef(null);const[g,b]=l.useState(typeof document!=="undefined"?document.documentElement.getAttribute("data-theme")==="dark":false);const u=l.useCallback(()=>{if(!(o==null?void 0:o.current))return;const i={center:r,zoom:p,mapId:A(t)?t:g===true?"c3c70a1ea4c4b0b8":"e5921eca3f70ade2",disableDefaultUI:true,mapTypeControl:false,fullscreenControl:false,streetViewControl:false,zoomControl:true};const m=new google.maps.Map(o.current,i);c.current=m;if(!P(a))return;a.forEach(s=>{var d,y;if(typeof((d=s==null?void 0:s.position)==null?void 0:d.lat)==="number"||typeof((y=s==null?void 0:s.position)==null?void 0:y.lng)==="number")return;const h=document.createElement("img");h.src="/images/prokodo-map-marker.webp";new google.maps.marker.AdvancedMarkerElement({map:m,content:h,...s})})},[g,t,r,a,p]);const f=K(e,g);l.useEffect(()=>{if(!f||c.current)return;u()},[f,u]);l.useEffect(()=>{const i=new MutationObserver(()=>{const m=document.documentElement.getAttribute("data-theme");b(m==="dark");c.current=null;u()});i.observe(document.documentElement,{attributes:true,attributeFilter:["data-theme"]});return()=>i.disconnect()},[u]);if(!f){return v.jsx(x,{height:"500px",width:"100%"})}return v.jsx("div",{ref:o,style:{width:"100%",height:"500px"}})});_.displayName="Map";try{_.displayName="Map";_.__docgenInfo={"description":"","displayName":"Map","props":{"apiKey":{"defaultValue":null,"description":"","name":"apiKey","required":true,"type":{"name":"string"}},"mapId":{"defaultValue":null,"description":"","name":"mapId","required":false,"type":{"name":"string"}},"center":{"defaultValue":null,"description":"","name":"center","required":true,"type":{"name":"MapCenter"}},"marker":{"defaultValue":null,"description":"","name":"marker","required":false,"type":{"name":"MapMarker[]"}},"zoom":{"defaultValue":null,"description":"","name":"zoom","required":false,"type":{"name":"number"}},"heading":{"defaultValue":null,"description":"","name":"heading","required":false,"type":{"name":"number"}},"tilt":{"defaultValue":null,"description":"","name":"tilt","required":false,"type":{"name":"number"}}}}}catch(e){}const F={title:"prokodo/service/Map",component:_,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}};const w={args:{apiKey:"",center:{lat:48.13913,lng:11.58022},marker:[{position:{lat:48.13913,lng:11.58022}},{position:{lat:48.141904,lng:11.600267}},{position:{lat:48.149234,lng:11.579997}},{position:{lat:48.132052,lng:11.560758}}]}};var k,O,T;w.parameters={...w.parameters,docs:{...(k=w.parameters)==null?void 0:k.docs,source:{originalSource:'{\n  args: {\n    apiKey: "",\n    center: {\n      lat: 48.13913,\n      lng: 11.58022\n    },\n    marker: ([{\n      position: {\n        lat: 48.13913,\n        lng: 11.58022\n      }\n    }, {\n      position: {\n        lat: 48.141904,\n        lng: 11.600267\n      }\n    }, {\n      position: {\n        lat: 48.149234,\n        lng: 11.579997\n      }\n    }, {\n      position: {\n        lat: 48.132052,\n        lng: 11.560758\n      }\n    }] as MapMarker[])\n  }\n}',...(T=(O=w.parameters)==null?void 0:O.docs)==null?void 0:T.source}}};const X=["Default"];export{w as Default,X as __namedExportsOrder,F as default};
