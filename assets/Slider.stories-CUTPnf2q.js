var Ye=Object.defineProperty;var o=(t,s)=>Ye(t,"name",{value:s,configurable:true});import{j as I}from"./jsx-runtime-CGXnEs--.js";import{r as b}from"./index-wP9GnQbl.js";import{c as Be}from"./bem-DSWMYwqE.js";import{g as Je,a as Qe,u as Ze,e as Ce,b as X,f as Ve,c as He,d as et}from"./index-DlukiLM0.js";import{u as tt}from"./useControlled-BO7suEnj.js";import{u as at}from"./useEnhancedEffect-CYUQ7yYa.js";import{u as we,o as he}from"./useEventCallback-DrdnsgII.js";import{v as rt,a as nt}from"./visuallyHidden-Dh2F06Cl.js";import{i as Re,L as st}from"./Label-DhkbTK4X.js";import"./_commonjsHelpers-DRKe4gOT.js";function Me(t){return typeof t==="string"}o(Me,"isHostComponent");function ot(t,s,u){if(typeof t==="function"){return t(s,u)}return t}o(ot,"resolveComponentProps");function de(t,s=Number.MIN_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(t,u))}o(de,"clamp");const We="Slider";function lt(t){return Qe(We,t)}o(lt,"getSliderUtilityClass");Je(We,["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb"]);const it=2;function Xe(t,s){return t-s}o(Xe,"asc");function De(t,s){const{index:u}=t.reduce((l,f,g)=>{const x=Math.abs(s-f);if(l===null||x<l.distance||x===l.distance){return{distance:x,index:g}}return l},null)??{};return u}o(De,"findClosest");function ge(t,s){if(s.current!==void 0&&t.changedTouches){const u=t;for(let l=0;l<u.changedTouches.length;l+=1){const f=u.changedTouches[l];if(f.identifier===s.current){return{x:f.clientX,y:f.clientY}}}return false}return{x:t.clientX,y:t.clientY}}o(ge,"trackFinger");function _e(t,s,u){return(t-s)*100/(u-s)}o(_e,"valueToPercent");function ut(t,s,u){return(u-s)*t+s}o(ut,"percentToValue");function ct(t){if(Math.abs(t)<1){const u=t.toExponential().split("e-");const l=u[0].split(".")[1];return(l?l.length:0)+parseInt(u[1],10)}const s=t.toString().split(".")[1];return s?s.length:0}o(ct,"getDecimalPrecision");function dt(t,s,u){const l=Math.round((t-u)/s)*s+u;return Number(l.toFixed(ct(s)))}o(dt,"roundValueToStep");function Oe({values:t,newValue:s,index:u}){const l=t.slice();l[u]=s;return l.sort(Xe)}o(Oe,"setValueIndex");function ke({sliderRef:t,activeIndex:s,setActive:u}){var f,g,x;const l=he(t.current);if(!((f=t.current)==null?void 0:f.contains(l.activeElement))||Number((g=l==null?void 0:l.activeElement)==null?void 0:g.getAttribute("data-index"))!==s){(x=t.current)==null?void 0:x.querySelector(`[type="range"][data-index="${s}"]`).focus()}if(u){u(s)}}o(ke,"focusThumb");function ve(t,s){if(typeof t==="number"&&typeof s==="number"){return t===s}if(typeof t==="object"&&typeof s==="object"){return nt(t,s)}return false}o(ve,"areValuesEqual");const mt={horizontal:{offset:o(t=>({left:`${t}%`}),"offset"),leap:o(t=>({width:`${t}%`}),"leap")},"horizontal-reverse":{offset:o(t=>({right:`${t}%`}),"offset"),leap:o(t=>({width:`${t}%`}),"leap")},vertical:{offset:o(t=>({bottom:`${t}%`}),"offset"),leap:o(t=>({height:`${t}%`}),"leap")}};const ft=o(t=>t,"Identity$1");let ye;function je(){if(ye===void 0){if(typeof CSS!=="undefined"&&typeof CSS.supports==="function"){ye=CSS.supports("touch-action","none")}else{ye=true}}return ye}o(je,"doesSupportTouchActionNone");function pt(t){const{"aria-labelledby":s,defaultValue:u,disabled:l=false,disableSwap:f=false,isRtl:g=false,marks:x=false,max:h=100,min:m=0,name:A,onChange:C,onChangeCommitted:F,orientation:V="horizontal",rootRef:D,scale:$=ft,step:w=1,shiftStep:Y=10,tabIndex:ae,value:M}=t;const _=b.useRef(void 0);const[q,B]=b.useState(-1);const[J,Q]=b.useState(-1);const[K,me]=b.useState(false);const Z=b.useRef(0);const[k,L]=tt({controlled:M,default:u??m,name:"Slider"});const R=C&&((e,a,n)=>{const c=e.nativeEvent||e;const i=new c.constructor(c.type,c);Object.defineProperty(i,"target",{writable:true,value:{value:a,name:A}});C(i,a,n)});const U=Array.isArray(k);let p=U?k.slice().sort(Xe):[k];p=p.map(e=>e==null?m:de(e,m,h));const re=x===true&&w!==null?[...Array(Math.floor((h-m)/w)+1)].map((e,a)=>({value:m+w*a})):x||[];const P=re.map(e=>e.value);const[fe,z]=b.useState(-1);const v=b.useRef(null);const ne=Ze(D,v);const se=o(e=>a=>{var c;const n=Number(a.currentTarget.getAttribute("data-index"));if(Re(a.target)){z(n)}Q(n);(c=e==null?void 0:e.onFocus)==null?void 0:c.call(e,a)},"createHandleHiddenInputFocus");const Te=o(e=>a=>{var n;if(!Re(a.target)){z(-1)}Q(-1);(n=e==null?void 0:e.onBlur)==null?void 0:n.call(e,a)},"createHandleHiddenInputBlur");const H=o((e,a)=>{const n=Number(e.currentTarget.getAttribute("data-index"));const c=p[n];const i=P.indexOf(c);let r=a;if(re&&w==null){const N=P[P.length-1];if(r>N){r=N}else if(r<P[0]){r=P[0]}else{r=r<c?P[i-1]:P[i+1]}}r=de(r,m,h);if(U){if(f){r=de(r,p[n-1]||-Infinity,p[n+1]||Infinity)}const N=r;r=Oe({values:p,newValue:r,index:n});let E=n;if(!f){E=r.indexOf(N)}ke({sliderRef:v,activeIndex:E})}L(r);z(n);if(R&&!ve(r,k)){R(e,r,n)}if(F){F(e,r)}},"changeValue");const T=o(e=>a=>{var n;if(w!==null){const c=Number(a.currentTarget.getAttribute("data-index"));const i=p[c];let r=null;if((a.key==="ArrowLeft"||a.key==="ArrowDown")&&a.shiftKey||a.key==="PageDown"){r=Math.max(i-Y,m)}else if((a.key==="ArrowRight"||a.key==="ArrowUp")&&a.shiftKey||a.key==="PageUp"){r=Math.min(i+Y,h)}if(r!==null){H(a,r);a.preventDefault()}}(n=e==null?void 0:e.onKeyDown)==null?void 0:n.call(e,a)},"createHandleHiddenInputKeyDown");at(()=>{var e;if(l&&v.current.contains(document.activeElement)){(e=document.activeElement)==null?void 0:e.blur()}},[l]);if(l&&q!==-1){B(-1)}if(l&&fe!==-1){z(-1)}const Ne=o(e=>a=>{var n;(n=e.onChange)==null?void 0:n.call(e,a);H(a,a.target.valueAsNumber)},"createHandleHiddenInputChange");const pe=b.useRef(void 0);let ee=V;if(g&&V==="horizontal"){ee+="-reverse"}const S=o(({finger:e,move:a=false})=>{const{current:n}=v;const{width:c,height:i,bottom:r,left:N}=n.getBoundingClientRect();let E;if(ee.startsWith("vertical")){E=(r-e.y)/i}else{E=(e.x-N)/c}if(ee.indexOf("-reverse")!==-1){E=1-E}let d;d=ut(E,m,h);if(w){d=dt(d,w,m)}else{const Ae=De(P,d);d=P[Ae]}d=de(d,m,h);let W=0;if(U){if(!a){W=De(p,d)}else{W=pe.current}if(f){d=de(d,p[W-1]||-Infinity,p[W+1]||Infinity)}const Ae=d;d=Oe({values:p,newValue:d,index:W});if(!(f&&a)){W=d.indexOf(Ae);pe.current=W}}return{newValue:d,activeIndex:W}},"getFingerNewValue");const y=we(e=>{const a=ge(e,_);if(!a){return}Z.current+=1;if(e.type==="mousemove"&&e.buttons===0){O(e);return}const{newValue:n,activeIndex:c}=S({finger:a,move:true});ke({sliderRef:v,activeIndex:c,setActive:B});L(n);if(!K&&Z.current>it){me(true)}if(R&&!ve(n,k)){R(e,n,c)}});const O=we(e=>{const a=ge(e,_);me(false);if(!a){return}const{newValue:n}=S({finger:a,move:true});B(-1);if(e.type==="touchend"){Q(-1)}if(F){F(e,n)}_.current=void 0;G()});const oe=we(e=>{if(l){return}if(!je()){e.preventDefault()}const a=e.changedTouches[0];if(a!=null){_.current=a.identifier}const n=ge(e,_);if(n!==false){const{newValue:i,activeIndex:r}=S({finger:n});ke({sliderRef:v,activeIndex:r,setActive:B});L(i);if(R&&!ve(i,k)){R(e,i,r)}}Z.current=0;const c=he(v.current);c.addEventListener("touchmove",y,{passive:true});c.addEventListener("touchend",O,{passive:true})});const G=b.useCallback(()=>{const e=he(v.current);e.removeEventListener("mousemove",y);e.removeEventListener("mouseup",O);e.removeEventListener("touchmove",y);e.removeEventListener("touchend",O)},[O,y]);b.useEffect(()=>{const{current:e}=v;e.addEventListener("touchstart",oe,{passive:je()});return()=>{e.removeEventListener("touchstart",oe);G()}},[G,oe]);b.useEffect(()=>{if(l){G()}},[l,G]);const Ee=o(e=>a=>{var i;(i=e.onMouseDown)==null?void 0:i.call(e,a);if(l){return}if(a.defaultPrevented){return}if(a.button!==0){return}a.preventDefault();const n=ge(a,_);if(n!==false){const{newValue:r,activeIndex:N}=S({finger:n});ke({sliderRef:v,activeIndex:N,setActive:B});L(r);if(R&&!ve(r,k)){R(a,r,N)}}Z.current=0;const c=he(v.current);c.addEventListener("mousemove",y,{passive:true});c.addEventListener("mouseup",O)},"createHandleMouseDown");const le=_e(U?p[0]:m,m,h);const Ie=_e(p[p.length-1],m,h)-le;const be=o((e={})=>{const a=Ce(e);const n={onMouseDown:Ee(a||{})};const c={...a,...n};return{...e,ref:ne,...c}},"getRootProps");const ie=o(e=>a=>{var c;(c=e.onMouseOver)==null?void 0:c.call(e,a);const n=Number(a.currentTarget.getAttribute("data-index"));Q(n)},"createHandleMouseOver");const te=o(e=>a=>{var n;(n=e.onMouseLeave)==null?void 0:n.call(e,a);Q(-1)},"createHandleMouseLeave");const Pe=o((e={})=>{const a=Ce(e);const n={onMouseOver:ie(a||{}),onMouseLeave:te(a||{})};return{...e,...a,...n}},"getThumbProps");const ue=o(e=>{return{pointerEvents:q!==-1&&q!==e?"none":void 0}},"getThumbStyle");const ce=o((e={})=>{const a=Ce(e);const n={onChange:Ne(a||{}),onFocus:se(a||{}),onBlur:Te(a||{}),onKeyDown:T(a||{})};const c={...a,...n};return{tabIndex:ae,"aria-labelledby":s,"aria-orientation":V,"aria-valuemax":$(h),"aria-valuemin":$(m),name:A,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:l,...e,...c,style:{...rt,direction:g?"rtl":"ltr",width:"100%",height:"100%"}}},"getHiddenInputProps");return{active:q,axis:ee,axisProps:mt,dragging:K,focusedThumbIndex:fe,getHiddenInputProps:ce,getRootProps:be,getThumbProps:Pe,marks:re,open:J,range:U,rootRef:ne,trackLeap:Ie,trackOffset:le,values:p,getThumbStyle:ue}}o(pt,"useSlider");function Fe(t){return t}o(Fe,"Identity");const bt=o(t=>{const{disabled:s,dragging:u,marked:l,orientation:f,track:g}=t;const x={root:["root",s&&"disabled",u&&"dragging",l&&"marked",f==="vertical"&&"vertical",g==="inverted"&&"trackInverted",g===false&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",s&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return He(x,et(lt))},"useUtilityClasses");const gt=b.forwardRef(o(function t(s,u){const{"aria-label":l,"aria-valuetext":f,"aria-labelledby":g,className:x,disableSwap:h=false,disabled:m=false,getAriaLabel:A,getAriaValueText:C,marks:F=false,max:V=100,min:D=0,name:$,onChange:w,onChangeCommitted:Y,orientation:ae="horizontal",shiftStep:M=10,scale:_=Fe,step:q=1,tabIndex:B,track:J="normal",value:Q,valueLabelFormat:K=Fe,isRtl:me=false,defaultValue:Z,slotProps:k={},slots:L={},...R}=s;const U={...s,marks:F,disabled:m,disableSwap:h,isRtl:me,defaultValue:Z,max:V,min:D,orientation:ae,scale:_,step:q,shiftStep:M,track:J,valueLabelFormat:K};const{axisProps:p,getRootProps:re,getHiddenInputProps:P,getThumbProps:fe,active:z,axis:v,range:ne,focusedThumbIndex:se,dragging:Te,marks:H,values:T,trackOffset:Ne,trackLeap:pe,getThumbStyle:ee}=pt({...U,rootRef:u});const S={...U,marked:H.length>0&&H.some(i=>i.label),dragging:Te,focusedThumbIndex:se,activeThumbIndex:z};const y=bt(S);const O=L.root??"span";const oe=X({elementType:O,getSlotProps:re,externalSlotProps:k.root,externalForwardedProps:R,ownerState:S,className:[y.root,x]});const G=L.rail??"span";const Ee=X({elementType:G,externalSlotProps:k.rail,ownerState:S,className:y.rail});const le=L.track??"span";const Ie=X({elementType:le,externalSlotProps:k.track,additionalProps:{style:{...p[v].offset(Ne),...p[v].leap(pe)}},ownerState:S,className:y.track});const be=L.thumb??"span";const ie=X({elementType:be,getSlotProps:fe,externalSlotProps:k.thumb,ownerState:S,skipResolvingSlotProps:true});const te=L.valueLabel;const Pe=X({elementType:te,externalSlotProps:k.valueLabel,ownerState:S});const ue=L.mark??"span";const ce=X({elementType:ue,externalSlotProps:k.mark,ownerState:S,className:y.mark});const e=L.markLabel??"span";const a=X({elementType:e,externalSlotProps:k.markLabel,ownerState:S});const n=L.input||"input";const c=X({elementType:n,getSlotProps:P,externalSlotProps:k.input,ownerState:S});return I.jsxs(O,{...oe,children:[I.jsx(G,{...Ee}),I.jsx(le,{...Ie}),H.filter(i=>i.value>=D&&i.value<=V).map((i,r)=>{const N=_e(i.value,D,V);const E=p[v].offset(N);let d;if(J===false){d=T.indexOf(i.value)!==-1}else{d=J==="normal"&&(ne?i.value>=T[0]&&i.value<=T[T.length-1]:i.value<=T[0])||J==="inverted"&&(ne?i.value<=T[0]||i.value>=T[T.length-1]:i.value>=T[0])}return I.jsxs(b.Fragment,{children:[I.jsx(ue,{"data-index":r,...ce,...!Me(ue)&&{markActive:d},style:{...E,...ce.style},className:Ve(ce.className,d&&y.markActive)}),i.label!=null?I.jsx(e,{"aria-hidden":true,"data-index":r,...a,...!Me(e)&&{markLabelActive:d},style:{...E,...a.style},className:Ve(y.markLabel,a.className,d&&y.markLabelActive),children:i.label}):null]},r)}),T.map((i,r)=>{const N=_e(i,D,V);const E=p[v].offset(N);const d=ot(k.thumb,S,{index:r,focused:se===r,active:z===r});return I.jsxs(be,{"data-index":r,...ie,...d,className:Ve(y.thumb,ie.className,d==null?void 0:d.className,z===r&&y.active,se===r&&y.focusVisible),style:{...E,...ee(r),...ie.style,...d==null?void 0:d.style},children:[I.jsx(n,{"data-index":r,"aria-label":A?A(r):l,"aria-valuenow":_(i),"aria-labelledby":g,"aria-valuetext":C?C(_(i),r):f,value:T[r],...c}),te?I.jsx(te,{...!Me(te)&&{valueLabelFormat:K,index:r,disabled:m},...Pe,children:typeof K==="function"?K(_(i),r):K}):null]},r)})]})},"Slider2"));const kt="gradientMove";const vt="fadeInKeyframe";const yt={"prokodo-Slider":"prokodo-Slider","prokodo-Slider__label":"prokodo-Slider__label","prokodo-Slider__root":"prokodo-Slider__root","prokodo-Slider__root--disabled":"prokodo-Slider__root--disabled","prokodo-Slider__rail":"prokodo-Slider__rail","prokodo-Slider__track":"prokodo-Slider__track","prokodo-Slider__thumb":"prokodo-Slider__thumb","prokodo-Slider__thumb--focused":"prokodo-Slider__thumb--focused","prokodo-Slider__mark":"prokodo-Slider__mark","prokodo-Slider__mark__label":"prokodo-Slider__mark__label","prokodo-Slider__valueText":"prokodo-Slider__valueText",gradientMove:kt,fadeInKeyframe:vt};const j=Be(yt,"Slider");const Le=b.memo(({id:t,className:s,required:u,value:l,label:f,labelProps:g,valueLabelProps:x,disabled:h,onFocus:m,onBlur:A,onChange:C,...F})=>{const[V,D]=b.useState(Number(l)??0);const[$,w]=b.useState(false);const Y=b.useCallback(M=>{w(!$);!$?m==null?void 0:m(M):A==null?void 0:A(M)},[$,m,A]);b.useEffect(()=>{if(l!==void 0){D(Number(l))}},[l]);const ae=b.useCallback((M,_,q)=>{D(_);C==null?void 0:C(M,_,q)},[C]);return I.jsxs("div",{className:j(void 0,void 0,s),children:[I.jsx(st,{...g,className:j("label"),htmlFor:t,label:f,required:u}),I.jsx(gt,{marks:true,"aria-label":f,id:t,...F,disabled:h,value:V,slotProps:{root:{className:j("root",{disabled:Boolean(h)})},rail:{className:j("rail")},track:{className:j("track")},thumb:{className:j("thumb",{focused:$})},mark:{className:j("mark")},markLabel:{className:j("mark__label")}},slots:{valueLabel:o(({children:M})=>I.jsx("span",{...x,className:j("valueText",void 0,g==null?void 0:g.className),children:M}),"valueLabel")},onBlur:Y,onChange:ae,onFocus:Y})]})});Le.displayName="Slider";try{Le.displayName="Slider";Le.__docgenInfo={"description":"","displayName":"Slider","props":{"value":{"defaultValue":null,"description":"","name":"value","required":false,"type":{"name":"string | number | number[]"}},"label":{"defaultValue":null,"description":"","name":"label","required":false,"type":{"name":"string"}},"labelProps":{"defaultValue":null,"description":"","name":"labelProps","required":false,"type":{"name":"LabelProps"}},"valueLabelProps":{"defaultValue":null,"description":"","name":"valueLabelProps","required":false,"type":{"name":"HTMLAttributes<HTMLSpanElement>"}},"required":{"defaultValue":null,"description":"","name":"required","required":false,"type":{"name":"boolean"}}}}}catch(t){}const Vt={title:"prokodo/common/Slider",component:Le,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}};const xe={args:{id:"example1",defaultValue:50}};const xt=[{value:0,label:"0°C"},{value:20,label:"20°C"},{value:37,label:"37°C"},{value:100,label:"100°C"}];const Se={args:{id:"example2","aria-label":"Temperature",defaultValue:30,getAriaValueText:o(t=>`${t}°C`,"getAriaValueText"),shiftStep:30,step:10,marks:xt,min:10,max:110}};var $e,qe,Ke;xe.parameters={...xe.parameters,docs:{...($e=xe.parameters)==null?void 0:$e.docs,source:{originalSource:'{\n  args: {\n    id: "example1",\n    defaultValue: 50\n  }\n}',...(Ke=(qe=xe.parameters)==null?void 0:qe.docs)==null?void 0:Ke.source}}};var Ue,ze,Ge;Se.parameters={...Se.parameters,docs:{...(Ue=Se.parameters)==null?void 0:Ue.docs,source:{originalSource:'{\n  args: {\n    id: "example2",\n    "aria-label": "Temperature",\n    defaultValue: 30,\n    getAriaValueText: (value: number) => `${value}°C`,\n    shiftStep: 30,\n    step: 10,\n    marks,\n    min: 10,\n    max: 110\n  }\n}',...(Ge=(ze=Se.parameters)==null?void 0:ze.docs)==null?void 0:Ge.source}}};const wt=["Default","WithLabels"];export{xe as Default,Se as WithLabels,wt as __namedExportsOrder,Vt as default};
