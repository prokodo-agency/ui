var me=Object.defineProperty;var f=(r,l)=>me(r,"name",{value:l,configurable:true});import{j as N}from"./jsx-runtime-CGXnEs--.js";import{r as i}from"./index-Dko9tpwX.js";import{r as fe}from"./index-wC6Z_Uz1.js";import{c as be}from"./bem-DSWMYwqE.js";import{b as ye,s as he}from"./Tooltip.stories-BkbHBvZO.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./index-hB-uq45w.js";import"./iframe-HtAnAIQl.js";import"../sb-preview/runtime.js";import"./createIsland-D0Kq_01P.js";const P=be(he,"Tooltip");function g(r,l,t){return Math.max(l,Math.min(t,r))}f(g,"clamp");function we(r,l){let t=document.getElementById(r);if(!t){t=document.createElement("div");t.id=r;document.body.appendChild(t)}t.style.position="fixed";t.style.left="0";t.style.top="0";t.style.width="0";t.style.height="0";t.style.pointerEvents="none";t.style.zIndex=String(l);return t}f(we,"getOverlayRoot");function ve(r){if(r==="top")return"bottom";if(r==="bottom")return"top";if(r==="left")return"right";return"left"}f(ve,"opposite");function xe(r){if(r==="top"||r==="bottom")return["right","left"];return["top","bottom"]}f(xe,"perpendicular");function Oe(r){const{placement:l,anchorX:t,anchorY:p,triggerRect:n,bubbleSize:s,gutter:h,offset:b,arrowSize:M}=r;const R=window.innerWidth;const q=window.innerHeight;const c=b+M;let u=0;let d=0;if(l==="top"){u=t-s.w/2;d=n.top-c-s.h}else if(l==="bottom"){u=t-s.w/2;d=n.bottom+c}else if(l==="left"){u=n.left-c-s.w;d=p-s.h/2}else{u=n.right+c;d=p-s.h/2}const y=u+s.w;const w=d+s.h;return u>=h&&y<=R-h&&d>=h&&w<=q-h}f(Oe,"fitsPlacement");function Te(r){const{preferred:l,preventOverflow:t}=r;if(!t)return l;const p=[l,ve(l),...xe(l)];for(const n of p){if(Oe({...r,placement:n}))return n}return l}f(Te,"choosePlacement");function qe(r){const{placement:l,anchorX:t,anchorY:p,bubbleSize:n,gutter:s,offset:h,arrowSize:b}=r;const M=window.innerWidth;const R=window.innerHeight;const q=h+b;let c=0;let u=0;if(l==="top"){c=t-n.w/2;u=p-q-n.h}else if(l==="bottom"){c=t-n.w/2;u=p+q}else if(l==="left"){c=t-q-n.w;u=p-n.h/2}else{c=t+q;u=p-n.h/2}const d=g(c,s,M-s-n.w);const y=g(u,s,R-s-n.h);const w=12;if(l==="top"||l==="bottom"){const O=t-d;const C=g(O,b+w,n.w-b-w);return{x:d,y,arrowX:C}}const v=p-y;const e=g(v,b+w,n.h-b-w);return{x:d,y,arrowY:e}}f(qe,"computeFixedPosition");function D(r){const{anchor:l="element",content:t,preventOverflow:p=true,portal:n=true,overlayRootId:s="pk-overlays",zIndex:h=2147483647,offset:b=6,mobileBreakpoint:M=960,open:R,defaultOpen:q,onOpenChange:c,delay:u=120,closeDelay:d=80,openOnHover:y=true,openOnFocus:w=true,disabled:v,triggerProps:e,placement:O="top",tooltipClassName:C,...ee}=r;const L=R!==void 0;const[te,ne]=i.useState(Boolean(q));const x=L?Boolean(R):te;const H=i.useRef(null);const j=i.useRef(null);const X=i.useRef(null);const[B,W]=i.useState(void 0);const[Y,oe]=i.useState(O);const k=i.useRef(null);const S=i.useRef(null);const E=i.useCallback(()=>{if(k.current!=null)window.clearTimeout(k.current);if(S.current!=null)window.clearTimeout(S.current);k.current=null;S.current=null},[]);const T=i.useCallback(o=>{if(v)return;if(!L)ne(o);c==null?void 0:c(o)},[v,L,c]);const A=i.useCallback(()=>{if(v)return;E();if(u<=0)return T(true);k.current=window.setTimeout(()=>T(true),u)},[E,u,v,T]);const _=i.useCallback(()=>{E();if(d<=0)return T(false);S.current=window.setTimeout(()=>T(false),d)},[E,d,T]);const le=i.useMemo(()=>({...e,onMouseEnter:y?o=>{var a;(a=e==null?void 0:e.onMouseEnter)==null?void 0:a.call(e,o);if(l==="pointer")H.current={x:o.clientX,y:o.clientY};A()}:e==null?void 0:e.onMouseEnter,onMouseLeave:y?o=>{var m,V;(m=e==null?void 0:e.onMouseLeave)==null?void 0:m.call(e,o);const a=o.relatedTarget;if(a&&((V=X.current)==null?void 0:V.contains(a)))return;if(l==="pointer")H.current=null;_()}:e==null?void 0:e.onMouseLeave,onMouseMove:l==="pointer"?o=>{var a;(a=e==null?void 0:e.onMouseMove)==null?void 0:a.call(e,o);H.current={x:o.clientX,y:o.clientY}}:e==null?void 0:e.onMouseMove,onFocus:w?o=>{var a;(a=e==null?void 0:e.onFocus)==null?void 0:a.call(e,o);A()}:e==null?void 0:e.onFocus,onBlur:w?o=>{var a;(a=e==null?void 0:e.onBlur)==null?void 0:a.call(e,o);_()}:e==null?void 0:e.onBlur,onKeyDown:f(o=>{var a,m,V;(a=e==null?void 0:e.onKeyDown)==null?void 0:a.call(e,o);if(o.key==="Escape"){E();T(false);(V=(m=o.currentTarget)==null?void 0:m.blur)==null?void 0:V.call(m)}},"onKeyDown")}),[e,y,w,A,_,E,T,l]);const ae=i.useMemo(()=>P("bubble",void 0,C),[C]);const re=i.useMemo(()=>P("bubble",{open:Boolean(x&&B),[Y]:true},C),[x,B,Y,C]);const z=i.useCallback(()=>{if(!n||!x||v)return;const o=j.current;const a=X.current;if(!o||!a)return;const m=o.querySelector("[data-tooltip-anchor]")??o;const V=8;const K=8;const ue=m.getBoundingClientRect();const F={w:a.offsetWidth,h:a.offsetHeight};if(!F.w||!F.h)return;const se=window.innerWidth<M;const ce=se&&(O==="left"||O==="right")?"top":O;const I=m.getBoundingClientRect();const U=I.left+I.width/2;const Z=I.top+I.height/2;const G=Te({preferred:ce,anchorX:U,anchorY:Z,triggerRect:ue,bubbleSize:F,gutter:V,offset:b,arrowSize:K,preventOverflow:p});const{x:de,y:pe,arrowX:J,arrowY:Q}=qe({placement:G,anchorX:U,anchorY:Z,bubbleSize:F,gutter:V,offset:b,arrowSize:K});oe(G);W({["--pk-tt-x"]:`${de}px`,["--pk-tt-y"]:`${pe}px`,["--pk-tt-arrow-x"]:J!=null?`${J}px`:void 0,["--pk-tt-arrow-y"]:Q!=null?`${Q}px`:void 0,["--pk-tt-z"]:String(h)})},[n,x,v,O,p,b,h,M]);i.useLayoutEffect(()=>{if(!n||!x)return;W(void 0);const o=requestAnimationFrame(()=>{requestAnimationFrame(()=>z())});const a=f(()=>z(),"onResize");const m=f(()=>z(),"onScroll");window.addEventListener("resize",a);window.addEventListener("scroll",m,true);return()=>{cancelAnimationFrame(o);window.removeEventListener("resize",a);window.removeEventListener("scroll",m,true)}},[n,x,z]);const $=typeof document!=="undefined"&&n?we(s,h):null;const ie=x&&Boolean(B);return N.jsxs(N.Fragment,{children:[N.jsx(ye,{...ee,__open:n?ie:x,__placement:n?Y:O,__renderVisualBubble:!n,__triggerRef:j,content:t,disabled:v,placement:O,tooltipClassName:C,triggerProps:le}),n&&!v&&$?fe.createPortal(N.jsx("span",{ref:X,role:"tooltip",style:B,"aria-hidden":x===void 0?void 0:!x,className:B?re:ae,onMouseEnter:y?()=>{E();T(true)}:void 0,onMouseLeave:y?()=>{_()}:void 0,children:t}),$):null]})}f(D,"TooltipClient");const Ie=i.memo(D);try{D.displayName="TooltipClient";D.__docgenInfo={"description":"","displayName":"TooltipClient","props":{"anchor":{"defaultValue":null,"description":`Anchor mode:
- "element": anchor is the trigger element's center (default, stable).
- "pointer": anchor follows the last mouse position (useful for large targets).

IMPORTANT:
For small icon buttons you almost always want "element".`,"name":"anchor","required":false,"type":{"name":"enum","value":[{"value":'"element"'},{"value":'"pointer"'}]}},"content":{"defaultValue":null,"description":"Tooltip content. Keep it short.","name":"content","required":true,"type":{"name":"ReactNode"}},"children":{"defaultValue":null,"description":"Single trigger element (button/span/etc).\nWe clone it to add aria + event handlers.","name":"children","required":true,"type":{"name":"TooltipTriggerElement"}},"id":{"defaultValue":null,"description":"Optional stable id (otherwise uses React useId()).\nUsed for aria-describedby (we render a hidden described-by node).","name":"id","required":false,"type":{"name":"string"}},"placement":{"defaultValue":null,"description":"Preferred placement (may be adjusted on mobile and/or flipped if it would overflow).","name":"placement","required":false,"type":{"name":"enum","value":[{"value":'"left"'},{"value":'"right"'},{"value":'"top"'},{"value":'"bottom"'}]}},"preventOverflow":{"defaultValue":null,"description":"If true, clamps the tooltip into the viewport.\n(With portal this is cheap and recommended.)","name":"preventOverflow","required":false,"type":{"name":"boolean"}},"portal":{"defaultValue":null,"description":'Render the visual tooltip into a portal (recommended).\nFixes "under other elements" and overflow clipping in complex layouts.',"name":"portal","required":false,"type":{"name":"boolean"}},"overlayRootId":{"defaultValue":null,"description":"The id of the overlay root element. If missing, Tooltip creates it.","name":"overlayRootId","required":false,"type":{"name":"string"}},"zIndex":{"defaultValue":null,"description":"Z-index used for the portal bubble.","name":"zIndex","required":false,"type":{"name":"number"}},"offset":{"defaultValue":null,"description":"Pixel gap between trigger and bubble (excluding arrow).","name":"offset","required":false,"type":{"name":"number"}},"mobileBreakpoint":{"defaultValue":null,"description":"Mobile breakpoint for placement adjustments.\nDefault matches $screen-lg (960).","name":"mobileBreakpoint","required":false,"type":{"name":"number"}},"disabled":{"defaultValue":null,"description":"Disable tooltip entirely.","name":"disabled","required":false,"type":{"name":"boolean"}},"open":{"defaultValue":null,"description":"Controlled open state (optional).","name":"open","required":false,"type":{"name":"boolean"}},"defaultOpen":{"defaultValue":null,"description":"Uncontrolled initial state (client only; will hydrate).","name":"defaultOpen","required":false,"type":{"name":"boolean"}},"onOpenChange":{"defaultValue":null,"description":"Notify open changes (client only).","name":"onOpenChange","required":false,"type":{"name":"TooltipOpenChangeEvent"}},"delay":{"defaultValue":null,"description":"Hover/focus open delay in ms (client only; will hydrate).","name":"delay","required":false,"type":{"name":"number"}},"closeDelay":{"defaultValue":null,"description":"Close delay in ms (client only; will hydrate).","name":"closeDelay","required":false,"type":{"name":"number"}},"openOnHover":{"defaultValue":null,"description":"Optional: allow hover open (default true).","name":"openOnHover","required":false,"type":{"name":"boolean"}},"openOnFocus":{"defaultValue":null,"description":"Optional: allow focus open (default true).","name":"openOnFocus","required":false,"type":{"name":"boolean"}},"className":{"defaultValue":null,"description":"Styling hooks.","name":"className","required":false,"type":{"name":"string"}},"tooltipClassName":{"defaultValue":null,"description":"","name":"tooltipClassName","required":false,"type":{"name":"string"}},"triggerClassName":{"defaultValue":null,"description":"","name":"triggerClassName","required":false,"type":{"name":"string"}},"triggerProps":{"defaultValue":null,"description":"Extra props applied to the trigger element (merged safely).","name":"triggerProps","required":false,"type":{"name":"HTMLAttributes<HTMLElement>"}}}}}catch(r){}export{Ie as default};
