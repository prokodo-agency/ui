var V=Object.defineProperty;var p=(m,o)=>V(m,"name",{value:o,configurable:true});import{c as q}from"./createLazyWrapper-CcCD0Sct.js";import{j as d}from"./jsx-runtime-CGXnEs--.js";import{r as n}from"./index-Dko9tpwX.js";import{i as r}from"./validations-hwxYw-LN.js";import{L as A}from"./Loading-ET0hQN1p.js";import{A as z}from"./Animated-BCxmyk8b.js";import{a as F}from"./Calendly.stories-BknkhL7M.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-HtAnAIQl.js";import"../sb-preview/runtime.js";import"./createIsland-D0Kq_01P.js";import"./bem-DSWMYwqE.js";let y=false;let v=false;function P(m){const{calendlyId:o,data:t,colors:a={text:"#4D4D4D",button:"#1E90FF",background:"#FFFFFF"},animationProps:T,hideLoading:D,hideCookieSettings:k,hideEventTypeDetails:w,hideDetails:x,...I}=m;const g=n.useRef(null);const L=n.useRef(false);const h=n.useRef(false);const[l,C]=n.useState(false);const[u,E]=n.useState(y);const[_,f]=n.useState(null);const b=p(e=>e==null?void 0:e.replaceAll("#",""),"format");const S=n.useCallback(()=>{const e={};if(!t)return e;for(const i of["name","email","firstName","lastName"]){if(r(t[i]))e[i]=t[i]}return e},[t]);const c=n.useMemo(()=>{const e=new URLSearchParams;if(Boolean(x))e.set("hide_landing_page_details","1");if(Boolean(w))e.set("hide_event_type_details","1");if(Boolean(k))e.set("hide_gdpr_banner","1");if(r(a.background))e.set("background_color",b(a==null?void 0:a.background));if(r(a.text))e.set("text_color",b(a.text));if(r(a.button))e.set("primary_color",b(a.button));if(r(t==null?void 0:t.utm_campaign))e.set("utm_campaign",(t==null?void 0:t.utm_campaign)??"");if(r(t==null?void 0:t.utm_source))e.set("utm_source",(t==null?void 0:t.utm_source)??"");return o?`https://calendly.com/${o}?${e.toString()}`:""},[o,a,t,x,w,k]);const s=n.useCallback((e=0)=>{const i=g.current;if(!i)return;if(h.current)return;if(i.dataset.initialized==="1")return;if(l)return;if(!o){f("Calendly ID missing.");return}if(!c){f("Calendly URL could not be built.");return}if(window.Calendly){try{i.innerHTML=""}catch{}i.setAttribute("data-url",c);window.Calendly.initInlineWidget({url:c,parentElement:i,prefill:S()});C(true);h.current=true;i.dataset.initialized="1";C(true);return}if(e<10){setTimeout(()=>s(e+1),100)}else{console.warn("Calendly widget failed to load.");f("Calendly widget failed to load.")}},[c,S,l,o]);const j=n.useCallback(e=>{L.current=e;if(!e||l)return;if(u)s()},[u,l,s]);n.useEffect(()=>()=>{const e=g.current;if(e){try{e.innerHTML="";delete e.dataset.initialized}catch{}}h.current=false;C(false)},[]);n.useEffect(()=>{if(y||typeof document==="undefined"){E(true);return}const e=document.createElement("script");e.src="https://assets.calendly.com/assets/external/widget.js";e.async=true;e.onload=()=>{y=true;E(true)};e.onerror=()=>{f("Calendly script blocked or failed to load.")};document.body.appendChild(e);const i=window.setTimeout(()=>{if(!y)f("Calendly script did not load (timeout).")},8e3);return()=>clearTimeout(i)},[]);n.useEffect(()=>{if(v||typeof document==="undefined")return;const e=document.createElement("link");e.rel="stylesheet";e.href="https://assets.calendly.com/assets/external/widget.css";document.head.appendChild(e);v=true},[]);n.useEffect(()=>{if(u&&L.current&&!l){s()}},[u,l,s]);n.useEffect(()=>{if(u&&!l){const e=setTimeout(()=>s(),0);return()=>clearTimeout(e)}return},[u,l,s]);const R={display:"block",minWidth:320,height:700};return d.jsxs(z,{...T,onAnimate:j,children:[!Boolean(D)&&!Boolean(l)&&!r(_)&&d.jsx(A,{}),r(_)&&d.jsxs("div",{role:"alert",style:{padding:12},children:[d.jsx("p",{style:{margin:0},children:_}),c&&d.jsx("p",{style:{marginTop:8},children:d.jsx("a",{href:c,rel:"noreferrer",target:"_blank",children:"Open Calendly in a new tab"})})]}),d.jsx("div",{ref:g,...I,style:R})]})}p(P,"CalendlyClient");try{Calendly.displayName="Calendly";Calendly.__docgenInfo={"description":"","displayName":"Calendly","props":{"calendlyId":{"defaultValue":null,"description":'Calendly URL identifier (format: "username/schedule-name").',"name":"calendlyId","required":true,"type":{"name":"string"}},"data":{"defaultValue":null,"description":"Prefill form data (name, email, custom fields).","name":"data","required":false,"type":{"name":"CalendlyData"}},"animationProps":{"defaultValue":null,"description":"Animation config (entrance effect).","name":"animationProps","required":false,"type":{"name":"AnimatedProps"}},"colors":{"defaultValue":null,"description":"Color scheme customization.","name":"colors","required":false,"type":{"name":"CalendlyColorOptions"}},"hideLoading":{"defaultValue":null,"description":"Hide Calendly loading spinner.","name":"hideLoading","required":false,"type":{"name":"boolean"}},"hideCookieSettings":{"defaultValue":null,"description":"Hide cookie settings link in Calendly widget.","name":"hideCookieSettings","required":false,"type":{"name":"boolean"}},"hideEventTypeDetails":{"defaultValue":null,"description":"Hide event type details in Calendly.","name":"hideEventTypeDetails","required":false,"type":{"name":"boolean"}},"hideDetails":{"defaultValue":null,"description":"Hide event details and booking info.","name":"hideDetails","required":false,"type":{"name":"boolean"}},"LoadingComponent":{"defaultValue":null,"description":"Custom loading component (shown while Calendly loads).","name":"LoadingComponent","required":false,"type":{"name":"ComponentType<{}>"}}}}}catch(m){}const Y=q({name:"Calendly",Client:P,Server:F,hydrateOnVisible:true,isInteractive:p(()=>true,"isInteractive")});export{Y as default};
