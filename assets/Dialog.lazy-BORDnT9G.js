var y=Object.defineProperty;var i=(n,f)=>y(n,"name",{value:f,configurable:true});import{c as k}from"./createLazyWrapper-AC75M60Y.js";import{j as b}from"./jsx-runtime-CGXnEs--.js";import{r as t}from"./index-DGnhqvo7.js";import{D as R,a as g}from"./Dialog.stories-DUmtUX3b.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-CWVqMGSv.js";import"../sb-preview/runtime.js";import"./createIsland-fzL0F2Ul.js";import"./bem-DSWMYwqE.js";import"./Button-DQU43q_T.js";import"./Link.server-C2t1a3dU.js";import"./BaseLink.server-DMYJ-8yf.js";import"./validations-DJC0TP_C.js";import"./Icon-DzaSgusb.js";import"./Headline-DJT0Pa5o.js";import"./AnimatedText-C7SfUpif.js";const x=300;function C({open:n=false,closeOnBackdropClick:f=true,onChange:a,...w},E){const p=t.useRef(null);const m=t.useRef(null);const u=t.useRef(null);const[s,D]=t.useState(n);const c=t.useCallback(()=>{p.current=document.activeElement;D(true)},[]);t.useEffect(()=>{var e;if(s){(e=m.current)==null?void 0:e.focus()}},[s]);const r=t.useCallback(e=>{D(false);setTimeout(()=>{var o;a==null?void 0:a({},e??"backdropClick",false);(o=p.current)==null?void 0:o.focus()},x)},[a]);t.useImperativeHandle(E,()=>({openDialog:c,closeDialog:r}),[c,r]);t.useEffect(()=>{if(n)c()},[n,c]);t.useEffect(()=>{if(!s)return;const e=i(o=>{if(o.key==="Escape"){o.preventDefault();r("escapeKeyDown")}if(o.key==="Tab"&&u.current){const l=u.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(l.length>0){const d=l[0];const v=l[l.length-1];if(o.shiftKey){if(document.activeElement===d){o.preventDefault();v.focus()}}else{if(document.activeElement===v){o.preventDefault();d.focus()}}}}},"handleKey");window.addEventListener("keydown",e);return()=>window.removeEventListener("keydown",e)},[s,r]);return b.jsx(R,{...w,closeButtonRef:m,containerRef:u,open:s,wrapperProps:{onMouseDown:i(()=>{if(f)r("backdropClick")},"onMouseDown")},onClose:r,onMouseDown:i(e=>e.stopPropagation(),"onMouseDown"),onCloseKeyDown:i(e=>{if(e.key==="Enter"){r()}},"onCloseKeyDown")})}i(C,"DialogClient");const I=t.forwardRef(C);const V=k({name:"Dialog",Client:I,Server:g,isInteractive:i(()=>true,"isInteractive")});export{V as default};
