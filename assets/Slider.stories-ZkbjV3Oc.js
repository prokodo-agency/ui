import{j as P}from"./jsx-runtime-D_zvdyIk.js";import{r as p}from"./index-BKmLb0-U.js";import{c as Xe}from"./bem-8m21rGuV.js";import{i as Me,L as Ye}from"./Label-BEskMcAe.js";import{g as Be,a as Je,u as Qe,e as Ie,b as W,f as Ae,c as Ze,d as He}from"./index-6uXNsT_N.js";import{u as et}from"./useControlled-9CHy_lXa.js";import{u as tt}from"./useEnhancedEffect-CYwpI_DY.js";import{u as Ce,o as Se}from"./useEventCallback-Ckqyn9vk.js";import{v as at,a as rt}from"./visuallyHidden-CNF3Utxx.js";function Ve(t){return typeof t=="string"}function nt(t,s,i){return typeof t=="function"?t(s,i):t}function ie(t,s=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(t,i))}const Ge="Slider";function st(t){return Je(Ge,t)}Be(Ge,["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb"]);const ot=2;function We(t,s){return t-s}function Re(t,s){const{index:i}=t.reduce((o,m,b)=>{const x=Math.abs(s-m);return o===null||x<o.distance||x===o.distance?{distance:x,index:b}:o},null)??{};return i}function be(t,s){if(s.current!==void 0&&t.changedTouches){const i=t;for(let o=0;o<i.changedTouches.length;o+=1){const m=i.changedTouches[o];if(m.identifier===s.current)return{x:m.clientX,y:m.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function he(t,s,i){return(t-s)*100/(i-s)}function lt(t,s,i){return(i-s)*t+s}function it(t){if(Math.abs(t)<1){const i=t.toExponential().split("e-"),o=i[0].split(".")[1];return(o?o.length:0)+parseInt(i[1],10)}const s=t.toString().split(".")[1];return s?s.length:0}function ut(t,s,i){const o=Math.round((t-i)/s)*s+i;return Number(o.toFixed(it(s)))}function De({values:t,newValue:s,index:i}){const o=t.slice();return o[i]=s,o.sort(We)}function ge({sliderRef:t,activeIndex:s,setActive:i}){var m,b,x;const o=Se(t.current);(!((m=t.current)!=null&&m.contains(o.activeElement))||Number((b=o==null?void 0:o.activeElement)==null?void 0:b.getAttribute("data-index"))!==s)&&((x=t.current)==null||x.querySelector(`[type="range"][data-index="${s}"]`).focus()),i&&i(s)}function ke(t,s){return typeof t=="number"&&typeof s=="number"?t===s:typeof t=="object"&&typeof s=="object"?rt(t,s):!1}const ct={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},dt=t=>t;let ve;function Oe(){return ve===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?ve=CSS.supports("touch-action","none"):ve=!0),ve}function mt(t){const{"aria-labelledby":s,defaultValue:i,disabled:o=!1,disableSwap:m=!1,isRtl:b=!1,marks:x=!1,max:S=100,min:d=0,name:I,onChange:A,onChangeCommitted:j,orientation:C="horizontal",rootRef:R,scale:F=dt,step:V=1,shiftStep:X=10,tabIndex:te,value:w}=t,h=p.useRef(void 0),[$,Y]=p.useState(-1),[B,J]=p.useState(-1),[q,ue]=p.useState(!1),Q=p.useRef(0),[g,_]=et({controlled:w,default:i??d,name:"Slider"}),M=A&&((e,a,n)=>{const u=e.nativeEvent||e,l=new u.constructor(u.type,u);Object.defineProperty(l,"target",{writable:!0,value:{value:a,name:I}}),A(l,a,n)}),K=Array.isArray(g);let f=K?g.slice().sort(We):[g];f=f.map(e=>e==null?d:ie(e,d,S));const ae=x===!0&&V!==null?[...Array(Math.floor((S-d)/V)+1)].map((e,a)=>({value:d+V*a})):x||[],E=ae.map(e=>e.value),[ce,U]=p.useState(-1),k=p.useRef(null),re=Qe(R,k),ne=e=>a=>{var u;const n=Number(a.currentTarget.getAttribute("data-index"));Me(a.target)&&U(n),J(n),(u=e==null?void 0:e.onFocus)==null||u.call(e,a)},Te=e=>a=>{var n;Me(a.target)||U(-1),J(-1),(n=e==null?void 0:e.onBlur)==null||n.call(e,a)},Z=(e,a)=>{const n=Number(e.currentTarget.getAttribute("data-index")),u=f[n],l=E.indexOf(u);let r=a;if(ae&&V==null){const L=E[E.length-1];r>L?r=L:r<E[0]?r=E[0]:r=r<u?E[l-1]:E[l+1]}if(r=ie(r,d,S),K){m&&(r=ie(r,f[n-1]||-1/0,f[n+1]||1/0));const L=r;r=De({values:f,newValue:r,index:n});let N=n;m||(N=r.indexOf(L)),ge({sliderRef:k,activeIndex:N})}_(r),U(n),M&&!ke(r,g)&&M(e,r,n),j&&j(e,r)},T=e=>a=>{var n;if(V!==null){const u=Number(a.currentTarget.getAttribute("data-index")),l=f[u];let r=null;(a.key==="ArrowLeft"||a.key==="ArrowDown")&&a.shiftKey||a.key==="PageDown"?r=Math.max(l-X,d):((a.key==="ArrowRight"||a.key==="ArrowUp")&&a.shiftKey||a.key==="PageUp")&&(r=Math.min(l+X,S)),r!==null&&(Z(a,r),a.preventDefault())}(n=e==null?void 0:e.onKeyDown)==null||n.call(e,a)};tt(()=>{var e;o&&k.current.contains(document.activeElement)&&((e=document.activeElement)==null||e.blur())},[o]),o&&$!==-1&&Y(-1),o&&ce!==-1&&U(-1);const Le=e=>a=>{var n;(n=e.onChange)==null||n.call(e,a),Z(a,a.target.valueAsNumber)},de=p.useRef(void 0);let H=C;b&&C==="horizontal"&&(H+="-reverse");const y=({finger:e,move:a=!1})=>{const{current:n}=k,{width:u,height:l,bottom:r,left:L}=n.getBoundingClientRect();let N;H.startsWith("vertical")?N=(r-e.y)/l:N=(e.x-L)/u,H.indexOf("-reverse")!==-1&&(N=1-N);let c;if(c=lt(N,d,S),V)c=ut(c,V,d);else{const Ee=Re(E,c);c=E[Ee]}c=ie(c,d,S);let G=0;if(K){a?G=de.current:G=Re(f,c),m&&(c=ie(c,f[G-1]||-1/0,f[G+1]||1/0));const Ee=c;c=De({values:f,newValue:c,index:G}),m&&a||(G=c.indexOf(Ee),de.current=G)}return{newValue:c,activeIndex:G}},v=Ce(e=>{const a=be(e,h);if(!a)return;if(Q.current+=1,e.type==="mousemove"&&e.buttons===0){D(e);return}const{newValue:n,activeIndex:u}=y({finger:a,move:!0});ge({sliderRef:k,activeIndex:u,setActive:Y}),_(n),!q&&Q.current>ot&&ue(!0),M&&!ke(n,g)&&M(e,n,u)}),D=Ce(e=>{const a=be(e,h);if(ue(!1),!a)return;const{newValue:n}=y({finger:a,move:!0});Y(-1),e.type==="touchend"&&J(-1),j&&j(e,n),h.current=void 0,z()}),se=Ce(e=>{if(o)return;Oe()||e.preventDefault();const a=e.changedTouches[0];a!=null&&(h.current=a.identifier);const n=be(e,h);if(n!==!1){const{newValue:l,activeIndex:r}=y({finger:n});ge({sliderRef:k,activeIndex:r,setActive:Y}),_(l),M&&!ke(l,g)&&M(e,l,r)}Q.current=0;const u=Se(k.current);u.addEventListener("touchmove",v,{passive:!0}),u.addEventListener("touchend",D,{passive:!0})}),z=p.useCallback(()=>{const e=Se(k.current);e.removeEventListener("mousemove",v),e.removeEventListener("mouseup",D),e.removeEventListener("touchmove",v),e.removeEventListener("touchend",D)},[D,v]);p.useEffect(()=>{const{current:e}=k;return e.addEventListener("touchstart",se,{passive:Oe()}),()=>{e.removeEventListener("touchstart",se),z()}},[z,se]),p.useEffect(()=>{o&&z()},[o,z]);const Ne=e=>a=>{var l;if((l=e.onMouseDown)==null||l.call(e,a),o||a.defaultPrevented||a.button!==0)return;a.preventDefault();const n=be(a,h);if(n!==!1){const{newValue:r,activeIndex:L}=y({finger:n});ge({sliderRef:k,activeIndex:L,setActive:Y}),_(r),M&&!ke(r,g)&&M(a,r,L)}Q.current=0;const u=Se(k.current);u.addEventListener("mousemove",v,{passive:!0}),u.addEventListener("mouseup",D)},oe=he(K?f[0]:d,d,S),Pe=he(f[f.length-1],d,S)-oe,me=(e={})=>{const a=Ie(e),n={onMouseDown:Ne(a||{})},u={...a,...n};return{...e,ref:re,...u}},le=e=>a=>{var u;(u=e.onMouseOver)==null||u.call(e,a);const n=Number(a.currentTarget.getAttribute("data-index"));J(n)},ee=e=>a=>{var n;(n=e.onMouseLeave)==null||n.call(e,a),J(-1)};return{active:$,axis:H,axisProps:ct,dragging:q,focusedThumbIndex:ce,getHiddenInputProps:(e={})=>{const a=Ie(e),n={onChange:Le(a||{}),onFocus:ne(a||{}),onBlur:Te(a||{}),onKeyDown:T(a||{})},u={...a,...n};return{tabIndex:te,"aria-labelledby":s,"aria-orientation":C,"aria-valuemax":F(S),"aria-valuemin":F(d),name:I,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":t.step??void 0,disabled:o,...e,...u,style:{...at,direction:b?"rtl":"ltr",width:"100%",height:"100%"}}},getRootProps:me,getThumbProps:(e={})=>{const a=Ie(e),n={onMouseOver:le(a||{}),onMouseLeave:ee(a||{})};return{...e,...a,...n}},marks:ae,open:B,range:K,rootRef:re,trackLeap:Pe,trackOffset:oe,values:f,getThumbStyle:e=>({pointerEvents:$!==-1&&$!==e?"none":void 0})}}function je(t){return t}const ft=t=>{const{disabled:s,dragging:i,marked:o,orientation:m,track:b}=t;return Ze({root:["root",s&&"disabled",i&&"dragging",o&&"marked",m==="vertical"&&"vertical",b==="inverted"&&"trackInverted",b===!1&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",s&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]},He(st))},pt=p.forwardRef(function(s,i){const{"aria-label":o,"aria-valuetext":m,"aria-labelledby":b,className:x,disableSwap:S=!1,disabled:d=!1,getAriaLabel:I,getAriaValueText:A,marks:j=!1,max:C=100,min:R=0,name:F,onChange:V,onChangeCommitted:X,orientation:te="horizontal",shiftStep:w=10,scale:h=je,step:$=1,tabIndex:Y,track:B="normal",value:J,valueLabelFormat:q=je,isRtl:ue=!1,defaultValue:Q,slotProps:g={},slots:_={},...M}=s,K={...s,marks:j,disabled:d,disableSwap:S,isRtl:ue,defaultValue:Q,max:C,min:R,orientation:te,scale:h,step:$,shiftStep:w,track:B,valueLabelFormat:q},{axisProps:f,getRootProps:ae,getHiddenInputProps:E,getThumbProps:ce,active:U,axis:k,range:re,focusedThumbIndex:ne,dragging:Te,marks:Z,values:T,trackOffset:Le,trackLeap:de,getThumbStyle:H}=mt({...K,rootRef:i}),y={...K,marked:Z.length>0&&Z.some(l=>l.label),dragging:Te,focusedThumbIndex:ne,activeThumbIndex:U},v=ft(y),D=_.root??"span",se=W({elementType:D,getSlotProps:ae,externalSlotProps:g.root,externalForwardedProps:M,ownerState:y,className:[v.root,x]}),z=_.rail??"span",Ne=W({elementType:z,externalSlotProps:g.rail,ownerState:y,className:v.rail}),oe=_.track??"span",Pe=W({elementType:oe,externalSlotProps:g.track,additionalProps:{style:{...f[k].offset(Le),...f[k].leap(de)}},ownerState:y,className:v.track}),me=_.thumb??"span",le=W({elementType:me,getSlotProps:ce,externalSlotProps:g.thumb,ownerState:y,skipResolvingSlotProps:!0}),ee=_.valueLabel,we=W({elementType:ee,externalSlotProps:g.valueLabel,ownerState:y}),fe=_.mark??"span",pe=W({elementType:fe,externalSlotProps:g.mark,ownerState:y,className:v.mark}),e=_.markLabel??"span",a=W({elementType:e,externalSlotProps:g.markLabel,ownerState:y}),n=_.input||"input",u=W({elementType:n,getSlotProps:E,externalSlotProps:g.input,ownerState:y});return P.jsxs(D,{...se,children:[P.jsx(z,{...Ne}),P.jsx(oe,{...Pe}),Z.filter(l=>l.value>=R&&l.value<=C).map((l,r)=>{const L=he(l.value,R,C),N=f[k].offset(L);let c;return B===!1?c=T.indexOf(l.value)!==-1:c=B==="normal"&&(re?l.value>=T[0]&&l.value<=T[T.length-1]:l.value<=T[0])||B==="inverted"&&(re?l.value<=T[0]||l.value>=T[T.length-1]:l.value>=T[0]),P.jsxs(p.Fragment,{children:[P.jsx(fe,{"data-index":r,...pe,...!Ve(fe)&&{markActive:c},style:{...N,...pe.style},className:Ae(pe.className,c&&v.markActive)}),l.label!=null?P.jsx(e,{"aria-hidden":!0,"data-index":r,...a,...!Ve(e)&&{markLabelActive:c},style:{...N,...a.style},className:Ae(v.markLabel,a.className,c&&v.markLabelActive),children:l.label}):null]},r)}),T.map((l,r)=>{const L=he(l,R,C),N=f[k].offset(L),c=nt(g.thumb,y,{index:r,focused:ne===r,active:U===r});return P.jsxs(me,{"data-index":r,...le,...c,className:Ae(v.thumb,le.className,c==null?void 0:c.className,U===r&&v.active,ne===r&&v.focusVisible),style:{...N,...H(r),...le.style,...c==null?void 0:c.style},children:[P.jsx(n,{"data-index":r,"aria-label":I?I(r):o,"aria-valuenow":h(l),"aria-labelledby":b,"aria-valuetext":A?A(h(l),r):m,value:T[r],...u}),ee?P.jsx(ee,{...!Ve(ee)&&{valueLabelFormat:q,index:r,disabled:d},...we,children:typeof q=="function"?q(h(l),r):q}):null]},r)})]})}),bt="gradientMove",gt="fadeInKeyframe",kt={"prokodo-Slider":"prokodo-Slider","prokodo-Slider__label":"prokodo-Slider__label","prokodo-Slider__root":"prokodo-Slider__root","prokodo-Slider__root--disabled":"prokodo-Slider__root--disabled","prokodo-Slider__rail":"prokodo-Slider__rail","prokodo-Slider__track":"prokodo-Slider__track","prokodo-Slider__thumb":"prokodo-Slider__thumb","prokodo-Slider__thumb--focused":"prokodo-Slider__thumb--focused","prokodo-Slider__mark":"prokodo-Slider__mark","prokodo-Slider__mark__label":"prokodo-Slider__mark__label","prokodo-Slider__valueText":"prokodo-Slider__valueText",gradientMove:bt,fadeInKeyframe:gt},O=Xe(kt,"Slider"),_e=p.memo(({id:t,className:s,required:i,value:o,label:m,labelProps:b,valueLabelProps:x,disabled:S,onFocus:d,onBlur:I,onChange:A,...j})=>{const[C,R]=p.useState(Number(o)??0),[F,V]=p.useState(!1),X=p.useCallback(w=>{V(!F),F?I==null||I(w):d==null||d(w)},[F,d,I]);p.useEffect(()=>{o!==void 0&&R(Number(o))},[o]);const te=p.useCallback((w,h,$)=>{R(h),A==null||A(w,h,$)},[A]);return P.jsxs("div",{className:O(void 0,void 0,s),children:[P.jsx(Ye,{...b,className:O("label"),htmlFor:t,label:m,required:i}),P.jsx(pt,{marks:!0,"aria-label":m,id:t,...j,disabled:S,value:C,slotProps:{root:{className:O("root",{disabled:!!S})},rail:{className:O("rail")},track:{className:O("track")},thumb:{className:O("thumb",{focused:F})},mark:{className:O("mark")},markLabel:{className:O("mark__label")}},slots:{valueLabel:({children:w})=>P.jsx("span",{...x,className:O("valueText",void 0,b==null?void 0:b.className),children:w})},onBlur:X,onChange:te,onFocus:X})]})});_e.displayName="Slider";try{_e.displayName="Slider",_e.__docgenInfo={description:"",displayName:"Slider",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | number[]"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},labelProps:{defaultValue:null,description:"",name:"labelProps",required:!1,type:{name:"LabelProps"}},valueLabelProps:{defaultValue:null,description:"",name:"valueLabelProps",required:!1,type:{name:"HTMLAttributes<HTMLSpanElement>"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}}}}}catch{}const Et={title:"prokodo/common/Slider",component:_e,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{}},ye={args:{id:"example1",defaultValue:50}},vt=[{value:0,label:"0°C"},{value:20,label:"20°C"},{value:37,label:"37°C"},{value:100,label:"100°C"}],xe={args:{id:"example2","aria-label":"Temperature",defaultValue:30,getAriaValueText:t=>`${t}°C`,shiftStep:30,step:10,marks:vt,min:10,max:110}};var Fe,$e,qe;ye.parameters={...ye.parameters,docs:{...(Fe=ye.parameters)==null?void 0:Fe.docs,source:{originalSource:`{
  args: {
    id: "example1",
    defaultValue: 50
  }
}`,...(qe=($e=ye.parameters)==null?void 0:$e.docs)==null?void 0:qe.source}}};var Ke,Ue,ze;xe.parameters={...xe.parameters,docs:{...(Ke=xe.parameters)==null?void 0:Ke.docs,source:{originalSource:`{
  args: {
    id: "example2",
    "aria-label": "Temperature",
    defaultValue: 30,
    getAriaValueText: (value: number) => \`\${value}°C\`,
    shiftStep: 30,
    step: 10,
    marks,
    min: 10,
    max: 110
  }
}`,...(ze=(Ue=xe.parameters)==null?void 0:Ue.docs)==null?void 0:ze.source}}};const It=["Default","WithLabels"];export{ye as Default,xe as WithLabels,It as __namedExportsOrder,Et as default};
