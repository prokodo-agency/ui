var w=Object.defineProperty;var q=(u,f)=>w(u,"name",{value:f,configurable:true});import{c as T}from"./createLazyWrapper-CcCD0Sct.js";import{j as _}from"./jsx-runtime-CGXnEs--.js";import{r as c}from"./index-Dko9tpwX.js";import{i as C}from"./validations-hwxYw-LN.js";import{a as D,b as E}from"./DynamicList-BK2CrU7Y.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-Bi7ppp4I.js";import"../sb-preview/runtime.js";import"./createIsland-D0Kq_01P.js";import"./bem-DSWMYwqE.js";import"./Input-SPqw_TY7.js";import"./Input.view-Bzo9O-TZ.js";import"./Label-X7jo9b-B.js";import"./Select-BBOYFlVj.js";import"./Button-D4YSYZ_9.js";import"./Link.server-Dprb4yLH.js";import"./BaseLink.server-CO1n6jUB.js";import"./Image-r6ezNYoV.js";import"./Icon-DGKrsoYY.js";function v({fields:u,value:f,onChange:e,buttonAddProps:d,buttonDeleteProps:o,...b}){const y=u.length===1;const[s,x]=c.useState(()=>f??[]);c.useEffect(()=>{if(f!==void 0){x(f)}},[f]);const N=c.useCallback(n=>{const i=n.target;const t=Number(i.dataset.index);const r=i.dataset.field;const{value:a}=i;if(Number.isNaN(t)||!C(r))return;const l=s.map((p,m)=>{if(m!==t)return p;return y?a:{...p,[r]:a}});x(l);e==null?void 0:e(l)},[s,e,y]);const V=c.useCallback((n,i,t)=>{const r=Array.isArray(t)?String(t[0]??""):t===null?"":String(t);const a=s.map((l,p)=>{if(p!==n)return l;if(y){return r===""?"":r}const m={...l};if(r===""){delete m[i]}else{m[i]=r}return m});x(a);e==null?void 0:e(a)},[s,e,y]);const L=c.useCallback(n=>{var r;const i=y?"":u.reduce((a,l)=>{a[(l==null?void 0:l.name)??""]="";return a},{});const t=[...s,i];x(t);(r=d==null?void 0:d.onClick)==null?void 0:r.call(d,n);e==null?void 0:e(t)},[s,e,y,u,d]);const k=c.useCallback(n=>{var r;const i=Number(n.currentTarget.dataset.index);if(Number.isNaN(i))return;const t=s.filter((a,l)=>l!==i);x(t);(r=o==null?void 0:o.onClick)==null?void 0:r.call(o,n,i);e==null?void 0:e(t)},[s,e,o]);const S=c.useMemo(()=>(u??[]).map(n=>{if(n.fieldType==="select"){const{...t}=n;const r=q((a,l)=>{var m,g;const p=Number((g=(m=a==null?void 0:a.target)==null?void 0:m.dataset)==null?void 0:g.index);if(!Number.isNaN(p)){V(p,t.name??"",l)}},"onChange2");return{fieldType:"select",...t,onChange:r}}const{...i}=n;return{fieldType:"input",...i,onChange:N}}),[u,N,V]);return _.jsx(D,{...b,fields:S,value:s,buttonAddProps:{...d,onClick:L},buttonDeleteProps:{...o,onClick:k}})}q(v,"DynamicListClient");const h=c.memo(v);try{v.displayName="DynamicListClient";v.__docgenInfo={"description":"","displayName":"DynamicListClient","props":{"id":{"defaultValue":null,"description":"","name":"id","required":false,"type":{"name":"string"}},"name":{"defaultValue":null,"description":'Prefix used for each input’s `name` attribute, e.g. `"pages"` → `pages[0].name`',"name":"name","required":true,"type":{"name":"string"}},"className":{"defaultValue":null,"description":"Optional wrapper CSS class","name":"className","required":false,"type":{"name":"string"}},"classNameList":{"defaultValue":null,"description":"Optional CSS class for each row container","name":"classNameList","required":false,"type":{"name":"string"}},"buttonAddProps":{"defaultValue":null,"description":"Props forwarded to the “Add” button","name":"buttonAddProps","required":false,"type":{"name":"ButtonProps"}},"buttonDeleteProps":{"defaultValue":null,"description":"Props forwarded to each “Delete” button.\nThe `onClick` handler receives the mouse event and the row index.","name":"buttonDeleteProps","required":false,"type":{"name":'(Omit<ButtonProps, "onClick"> & { onClick?: ((e: MouseEvent<HTMLButtonElement, MouseEvent>, index: number) => void); })'}},"disabled":{"defaultValue":null,"description":"","name":"disabled","required":false,"type":{"name":"boolean"}},"label":{"defaultValue":null,"description":"","name":"label","required":false,"type":{"name":"string"}},"labelProps":{"defaultValue":null,"description":"","name":"labelProps","required":false,"type":{"name":'Omit<LabelProps, "error" | "label" | "required" | "htmlFor">'}},"required":{"defaultValue":null,"description":"","name":"required","required":false,"type":{"name":"boolean"}},"errorText":{"defaultValue":null,"description":"","name":"errorText","required":false,"type":{"name":"string"}},"helperText":{"defaultValue":null,"description":"","name":"helperText","required":false,"type":{"name":"string"}},"fields":{"defaultValue":null,"description":"Exactly one field definition (tuple of length 1).\nTwo or more field definitions.","name":"fields","required":true,"type":{"name":"[DynamicListField] | DynamicListField[]"}},"value":{"defaultValue":null,"description":"Current values: one string per row.\nCurrent values: one object per row, mapping fieldName → fieldValue.","name":"value","required":false,"type":{"name":"string[] | Record<string, string>[]"}},"onChange":{"defaultValue":null,"description":"Callback when list changes. Receives updated `string[]` array.\nCallback when list changes. Receives updated array of objects.","name":"onChange","required":false,"type":{"name":"((value: string[]) => void) | ((value: Record<string, string>[]) => void)"}}}}}catch(u){}const P=T({name:"DynamicList",Client:h,Server:E});export{P as default};
