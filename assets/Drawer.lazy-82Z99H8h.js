var _=Object.defineProperty;var s=(n,D)=>_(n,"name",{value:D,configurable:true});import{c as L}from"./createLazyWrapper-CcCD0Sct.js";import{j as b}from"./jsx-runtime-CGXnEs--.js";import{r as t}from"./index-Dko9tpwX.js";import{b as C,c as A}from"./Drawer.stories-BiujHPYQ.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-HtAnAIQl.js";import"../sb-preview/runtime.js";import"./createIsland-D0Kq_01P.js";import"./bem-DSWMYwqE.js";import"./validations-hwxYw-LN.js";import"./Button-8iSQijSB.js";import"./Link.server-BQ-pPtIc.js";import"./BaseLink.server-QY0KCWKd.js";import"./Image-CkZ8lgxi.js";import"./Icon-CYmjVteM.js";import"./Headline-D7t83EdD.js";import"./RichText-BED1SunB.js";import"./AnimatedText-BPnjLr4T.js";function F({open:n=false,closeOnBackdropClick:D=true,onChange:d,...k},R){const f=t.useRef(null);const v=t.useRef(null);const w=t.useRef(null);const[o,l]=t.useState(()=>Boolean(n));const[p,u]=t.useState(()=>Boolean(n));t.useLayoutEffect(()=>{if(!n){l(false);u(false)}},[n]);t.useEffect(()=>{if(n){f.current=document.activeElement;if(!p)u(true);requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;(e=w.current)==null?void 0:e.getBoundingClientRect();l(true)})})}else{l(false)}},[n,p]);t.useEffect(()=>{if(o||!p)return;const e=w.current;if(!e){u(false);return}const r=s(m=>{var i,y;if(m.target!==e)return;e.removeEventListener("transitionend",r);u(false);(y=(i=f.current)==null?void 0:i.focus)==null?void 0:y.call(i)},"onEnd");const a=setTimeout(()=>{var m,i;e.removeEventListener("transitionend",r);u(false);(i=(m=f.current)==null?void 0:m.focus)==null?void 0:i.call(m)},450);return()=>{e.removeEventListener("transitionend",r);clearTimeout(a)}},[o,p]);const c=t.useCallback(e=>{var r,a;l(false);d==null?void 0:d({},e??"backdropClick");(a=(r=f.current)==null?void 0:r.focus)==null?void 0:a.call(r)},[d]);t.useEffect(()=>{if(!o)return;const e=s(r=>{if(r.key==="Escape"){r.preventDefault();c("escapeKeyDown")}},"onKey");window.addEventListener("keydown",e);return()=>window.removeEventListener("keydown",e)},[o,c]);t.useEffect(()=>{if(!o)return;const e=requestAnimationFrame(()=>{var r,a;(a=(r=v.current)==null?void 0:r.focus)==null?void 0:a.call(r)});return()=>cancelAnimationFrame(e)},[o]);const E=t.useCallback(()=>{f.current=document.activeElement;u(true);requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;(e=w.current)==null?void 0:e.getBoundingClientRect();l(true)})})},[]);t.useImperativeHandle(R,()=>({openDrawer:E,closeDrawer:c}),[E,c]);if(!p)return null;return b.jsx(C,{...k,closeButtonRef:v,containerRef:w,open:o,backdropProps:{onMouseDown:s(()=>{if(o&&D){c("backdropClick")}},"onMouseDown")},onClose:c,onMouseDown:s(e=>e.stopPropagation(),"onMouseDown")})}s(F,"DrawerClient");const S=t.forwardRef(F);const J=L({name:"Drawer",Client:S,Server:A,isInteractive:s(()=>true,"isInteractive")});try{Drawer.displayName="Drawer";Drawer.__docgenInfo={"description":"We wrap DrawerClient/DrawerServer in a LazyWrapper,\nso that on the server we render <DrawerServer>, but\non the client we hydrate into <DrawerClient>.","displayName":"Drawer","props":{}}}catch(n){}export{J as default};
