var k=Object.defineProperty;var i=(n,l)=>k(n,"name",{value:l,configurable:true});import{c as b}from"./createLazyWrapper-AC75M60Y.js";import{j as R}from"./jsx-runtime-CGXnEs--.js";import{r as t}from"./index-DGnhqvo7.js";import{D as g,a as x}from"./Dialog.stories-BD4wMQBa.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-DIWfkn9q.js";import"../sb-preview/runtime.js";import"./createIsland-fzL0F2Ul.js";import"./bem-DSWMYwqE.js";import"./Button-C9XyeX5h.js";import"./Link.server-9OKSc6GU.js";import"./BaseLink.server-BRG_yKpR.js";import"./validations-DJC0TP_C.js";import"./Icon-BKsE6VgJ.js";import"./Headline-Cjx10stz.js";import"./AnimatedText-DRAM74UD.js";const I=300;function K({open:n=false,closeOnBackdropClick:l=true,onChange:a,onClose:c,...E},y){const m=t.useRef(null);const D=t.useRef(null);const p=t.useRef(null);const[s,d]=t.useState(n);const f=t.useCallback(()=>{m.current=document.activeElement;d(true)},[]);t.useEffect(()=>{var e;if(s){(e=D.current)==null?void 0:e.focus()}},[s]);const o=t.useCallback(e=>{d(false);c==null?void 0:c();setTimeout(()=>{var r;a==null?void 0:a({},e??"backdropClick",false);(r=m.current)==null?void 0:r.focus()},I)},[a,c]);t.useImperativeHandle(y,()=>({openDialog:f,closeDialog:o}),[f,o]);t.useEffect(()=>{if(n)f()},[n,f]);t.useEffect(()=>{if(!s)return;const e=i(r=>{if(r.key==="Escape"){r.preventDefault();o("escapeKeyDown")}if(r.key==="Tab"&&p.current){const u=p.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(u.length>0){const v=u[0];const w=u[u.length-1];if(r.shiftKey){if(document.activeElement===v){r.preventDefault();w.focus()}}else{if(document.activeElement===w){r.preventDefault();v.focus()}}}}},"handleKey");window.addEventListener("keydown",e);return()=>window.removeEventListener("keydown",e)},[s,o]);return R.jsx(g,{...E,closeButtonRef:D,containerRef:p,open:s,wrapperProps:{onMouseDown:i(()=>{if(l)o("backdropClick")},"onMouseDown")},onClose:o,onMouseDown:i(e=>e.stopPropagation(),"onMouseDown"),onCloseKeyDown:i(e=>{if(e.key==="Enter"){o()}},"onCloseKeyDown")})}i(K,"DialogClient");const S=t.forwardRef(K);const $=b({name:"Dialog",Client:S,Server:x,isInteractive:i(()=>true,"isInteractive")});export{$ as default};
