var L=Object.defineProperty;var s=(n,D)=>L(n,"name",{value:D,configurable:true});import{c as _}from"./createLazyWrapper-CIVnaDo8.js";import{j as C}from"./jsx-runtime-CGXnEs--.js";import{r as t}from"./index-CBfA15Kp.js";import{D as b,a as A}from"./Drawer.stories-Q6TAsSNb.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-PC7TY-1e.js";import"../sb-preview/runtime.js";import"./createIsland-Brc__KHp.js";import"./bem-DSWMYwqE.js";import"./validations-hwxYw-LN.js";import"./Button-B8qhLpYb.js";import"./Link.server-HOUCIRWN.js";import"./BaseLink.server-CZpyocaW.js";import"./Icon-CTMjo2DJ.js";import"./Headline-BJ2FNbCO.js";import"./AnimatedText-DVs7mZW2.js";function F({open:n=false,closeOnBackdropClick:D=true,onChange:d,...k},R){const m=t.useRef(null);const v=t.useRef(null);const w=t.useRef(null);const[o,l]=t.useState(()=>Boolean(n));const[p,u]=t.useState(()=>Boolean(n));t.useLayoutEffect(()=>{if(!n){l(false);u(false)}},[n]);t.useEffect(()=>{if(n){m.current=document.activeElement;if(!p)u(true);requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;(e=w.current)==null?void 0:e.getBoundingClientRect();l(true)})})}else{l(false)}},[n,p]);t.useEffect(()=>{if(o||!p)return;const e=w.current;if(!e){u(false);return}const r=s(f=>{var i,y;if(f.target!==e)return;e.removeEventListener("transitionend",r);u(false);(y=(i=m.current)==null?void 0:i.focus)==null?void 0:y.call(i)},"onEnd");e.addEventListener("transitionend",r);const a=setTimeout(()=>{var f,i;e.removeEventListener("transitionend",r);u(false);(i=(f=m.current)==null?void 0:f.focus)==null?void 0:i.call(f)},450);return()=>{e.removeEventListener("transitionend",r);clearTimeout(a)}},[o,p]);const c=t.useCallback(e=>{var r,a;l(false);d==null?void 0:d({},e??"backdropClick");(a=(r=m.current)==null?void 0:r.focus)==null?void 0:a.call(r)},[d]);t.useEffect(()=>{if(!o)return;const e=s(r=>{if(r.key==="Escape"){r.preventDefault();c("escapeKeyDown")}},"onKey");window.addEventListener("keydown",e);return()=>window.removeEventListener("keydown",e)},[o,c]);t.useEffect(()=>{if(!o)return;const e=requestAnimationFrame(()=>{var r,a;(a=(r=v.current)==null?void 0:r.focus)==null?void 0:a.call(r)});return()=>cancelAnimationFrame(e)},[o]);const E=t.useCallback(()=>{m.current=document.activeElement;u(true);requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;(e=w.current)==null?void 0:e.getBoundingClientRect();l(true)})})},[]);t.useImperativeHandle(R,()=>({openDrawer:E,closeDrawer:c}),[E,c]);if(!p)return null;return C.jsx(b,{...k,closeButtonRef:v,containerRef:w,open:o,backdropProps:{onMouseDown:s(()=>{if(o&&D){c("backdropClick")}},"onMouseDown")},onClose:c,onMouseDown:s(e=>e.stopPropagation(),"onMouseDown")})}s(F,"DrawerClient");const S=t.forwardRef(F);const h=_({name:"Drawer",Client:S,Server:A,isInteractive:s(()=>true,"isInteractive")});try{Drawer.displayName="Drawer";Drawer.__docgenInfo={"description":"We wrap DrawerClient/DrawerServer in a LazyWrapper,\nso that on the server we render <DrawerServer>, but\non the client we hydrate into <DrawerClient>.","displayName":"Drawer","props":{}}}catch(n){}export{h as default};
