var k=Object.defineProperty;var i=(s,u)=>k(s,"name",{value:u,configurable:true});import{c as y}from"./createLazyWrapper-D1NyvZjw.js";import{j as b}from"./jsx-runtime-CGXnEs--.js";import{r as e}from"./index-DGnhqvo7.js";import{D as R,a as g}from"./Dialog.stories-DmfA-FfU.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-qNiEo5kq.js";import"../sb-preview/runtime.js";import"./createIsland-CYXQRK9I.js";import"./bem-DSWMYwqE.js";import"./Button-Bihifq67.js";import"./Link.server-C7haGjkb.js";import"./BaseLink.server-BHNNn_tQ.js";import"./validations-hwxYw-LN.js";import"./Icon-BeTZfZnx.js";import"./Headline-CcgObHpS.js";import"./AnimatedText-Dg5OpCOa.js";const x=300;function I({open:s=false,closeOnBackdropClick:u=true,onChange:a,...w},E){const p=e.useRef(null);const m=e.useRef(null);const f=e.useRef(null);const[n,d]=e.useState(s);const c=e.useCallback(()=>{p.current=document.activeElement;d(true)},[]);e.useEffect(()=>{var t;if(n){(t=m.current)==null?void 0:t.focus()}},[n]);const r=e.useCallback(t=>{d(false);setTimeout(()=>{var o;a==null?void 0:a({},t??"backdropClick",false);(o=p.current)==null?void 0:o.focus()},x)},[a]);e.useImperativeHandle(E,()=>({openDialog:c,closeDialog:r}),[c,r]);e.useEffect(()=>{if(s)c()},[s,c]);e.useEffect(()=>{if(!n)return;const t=i(o=>{if(o.key==="Escape"){o.preventDefault();r("escapeKeyDown")}if(o.key==="Tab"&&f.current){const l=f.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');if(l.length>0){const D=l[0];const v=l[l.length-1];if(o.shiftKey){if(document.activeElement===D){o.preventDefault();v.focus()}}else{if(document.activeElement===v){o.preventDefault();D.focus()}}}}},"handleKey");window.addEventListener("keydown",t);return()=>window.removeEventListener("keydown",t)},[n,r]);return b.jsx(R,{...w,closeButtonRef:m,containerRef:f,open:n,wrapperProps:{onMouseDown:i(()=>{if(u)r("backdropClick")},"onMouseDown")},onClose:r,onMouseDown:i(t=>t.stopPropagation(),"onMouseDown")})}i(I,"DialogClient");const S=e.forwardRef(I);const V=y({name:"Dialog",Client:S,Server:g,isInteractive:i(()=>true,"isInteractive")});export{V as default};
