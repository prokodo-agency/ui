var k=Object.defineProperty;var s=(l,i)=>k(l,"name",{value:i,configurable:true});import{c as S}from"./createLazyWrapper-CcCD0Sct.js";import{j as x}from"./jsx-runtime-CGXnEs--.js";import{r as t}from"./index-Dko9tpwX.js";import{A as T,a as _}from"./Autocomplete.stories-CBgce12f.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./iframe-ueE3a6Tk.js";import"../sb-preview/runtime.js";import"./createIsland-D0Kq_01P.js";import"./bem-DSWMYwqE.js";import"./validations-hwxYw-LN.js";import"./Input-CTouYYRo.js";import"./Input.view-yUlCSrqL.js";import"./Label-X7jo9b-B.js";import"./Loading-Dg5pv-ZZ.js";function w({name:l,value:i,items:q,minQueryLength:V=2,onChange:o,onSelect:u,...C}){const m=t.useRef(null);const[c,f]=t.useState(i??"");const[a,r]=t.useState(false);const[y,g]=t.useState(0);const[I,v]=t.useState(void 0);t.useEffect(()=>{f(i??"")},[i]);t.useEffect(()=>{if(!a)return;const e=s(n=>{var p;if(!((p=m.current)==null?void 0:p.contains(n.target))){r(false)}},"onClickOutside");window.addEventListener("mousedown",e);return()=>window.removeEventListener("mousedown",e)},[a]);const d=t.useMemo(()=>q??[],[q]);const h=t.useCallback(()=>{const e=m.current;if(!e)return;const n=e.querySelector(`input[name="${l}"], textarea[name="${l}"]`);if(!n){v(void 0);return}const p=e.getBoundingClientRect();const N=n.getBoundingClientRect();v(N.bottom-p.top)},[l]);t.useEffect(()=>{if(!a)return;h();const e=s(()=>h(),"onLayoutChange");window.addEventListener("resize",e);window.addEventListener("scroll",e,true);return()=>{window.removeEventListener("resize",e);window.removeEventListener("scroll",e,true)}},[a,c,h]);const L=t.useCallback(e=>{f(e);r(true);g(0);o==null?void 0:o({query:e})},[o]);const b=t.useCallback(e=>{f(e.label);r(false);u==null?void 0:u(e)},[u]);const A=t.useCallback(e=>{if(e.key==="Escape"){r(false);return}if(e.key==="ArrowDown"){e.preventDefault();r(true);g(n=>Math.min(n+1,d.length-1));return}if(e.key==="ArrowUp"){e.preventDefault();g(n=>Math.max(n-1,0));return}if(e.key==="Enter"&&a){e.preventDefault();const n=d[y];if(!n)return;b(n)}},[y,b,d,a]);const E={open:a,listTop:I,activeIndex:y,onInputChange:L,onInputFocus:s(()=>{if(c.trim().length>=V)r(true)},"onInputFocus"),onInputKeyDown:A,onSelectItem:b};return x.jsx("div",{ref:m,children:x.jsx(T,{...C,_clientState:E,items:d,minQueryLength:V,name:l,open:a,value:c})})}s(w,"AutocompleteClient");const D=t.memo(w);try{w.displayName="AutocompleteClient";w.__docgenInfo={"description":"","displayName":"AutocompleteClient","props":{"id":{"defaultValue":null,"description":"Optional DOM id. If omitted, consumer should still ensure unique name usage.","name":"id","required":false,"type":{"name":"string"}},"name":{"defaultValue":null,"description":"Form field name used by the underlying Input element.","name":"name","required":true,"type":{"name":"string"}},"label":{"defaultValue":null,"description":"Visible label text rendered by Input.","name":"label","required":false,"type":{"name":"string"}},"placeholder":{"defaultValue":null,"description":"Input placeholder text.","name":"placeholder","required":false,"type":{"name":"string"}},"required":{"defaultValue":null,"description":"Marks field as required (a11y + UI indicator).","name":"required","required":false,"type":{"name":"boolean"}},"disabled":{"defaultValue":null,"description":"Disables typing/interaction.","name":"disabled","required":false,"type":{"name":"boolean"}},"fullWidth":{"defaultValue":null,"description":"Stretches input to full container width.","name":"fullWidth","required":false,"type":{"name":"boolean"}},"readOnly":{"defaultValue":null,"description":"Makes input read-only while preserving focusability.","name":"readOnly","required":false,"type":{"name":"boolean"}},"autoComplete":{"defaultValue":null,"description":"Native browser autocomplete attribute.","name":"autoComplete","required":false,"type":{"name":"string"}},"aria-describedby":{"defaultValue":null,"description":"Optional aria-describedby forwarded to Input.","name":"aria-describedby","required":false,"type":{"name":"string"}},"aria-labelledby":{"defaultValue":null,"description":"Optional aria-labelledby forwarded to Input.","name":"aria-labelledby","required":false,"type":{"name":"string"}},"value":{"defaultValue":null,"description":"Controlled input value (query string).","name":"value","required":false,"type":{"name":"string"}},"items":{"defaultValue":null,"description":"Suggestion items currently shown in listbox.","name":"items","required":false,"type":{"name":"AutocompleteItem[]"}},"loading":{"defaultValue":null,"description":"Loading indicator for async search scenarios.","name":"loading","required":false,"type":{"name":"boolean"}},"loadingText":{"defaultValue":null,"description":"Text shown while loading.","name":"loadingText","required":false,"type":{"name":"string"}},"emptyText":{"defaultValue":null,"description":"Text shown when no results are available.","name":"emptyText","required":false,"type":{"name":"string"}},"minQueryLength":{"defaultValue":{value:"2"},"description":"Minimum characters required before searching/listing results.","name":"minQueryLength","required":false,"type":{"name":"number"}},"minQueryLengthText":{"defaultValue":null,"description":'Message shown when query length is below `minQueryLength`.\nSupports `{count}` placeholder replacement.\n@example "Please enter at least {count} characters"',"name":"minQueryLengthText","required":false,"type":{"name":"string"}},"className":{"defaultValue":null,"description":"Root wrapper class.","name":"className","required":false,"type":{"name":"string"}},"inputClassName":{"defaultValue":null,"description":"Input wrapper class.","name":"inputClassName","required":false,"type":{"name":"string"}},"listClassName":{"defaultValue":null,"description":"Listbox panel class.","name":"listClassName","required":false,"type":{"name":"string"}},"itemClassName":{"defaultValue":null,"description":"Option row class.","name":"itemClassName","required":false,"type":{"name":"string"}},"inputProps":{"defaultValue":null,"description":"Direct passthrough props to underlying `Input`.\n\nUse this for Input-specific behavior that is not exposed as top-level\nAutocomplete props, e.g. `hideLabel`, `hideLegend`, `helperText`,\n`labelProps`, `fieldClassName`, `inputContainerClassName`, etc.","name":"inputProps","required":false,"type":{"name":"(AutocompleteInputProps & { hideLabel?: boolean; })"}},"onChange":{"defaultValue":null,"description":"Emitted whenever query text changes.","name":"onChange","required":false,"type":{"name":"((event: AutocompleteChangeEvent) => void)"}},"onSelect":{"defaultValue":null,"description":"Emitted when an item is selected (mouse/keyboard).","name":"onSelect","required":false,"type":{"name":"((item: AutocompleteItem) => void)"}}}}}catch(l){}const J=S({name:"Autocomplete",Client:D,Server:_});export{J as default};
