import{c as P}from"./createLazyWrapper-AC75M60Y.js";import{j}from"./jsx-runtime-CGXnEs--.js";import{r as i}from"./index-DGnhqvo7.js";import{a as q}from"./validations-DJC0TP_C.js";import{F as A,a as R}from"./Form.stories-C8e7LUNd.js";import"./_commonjsHelpers-DRKe4gOT.js";import"./DatePicker-Cxegx19R.js";import"./iframe-DIWfkn9q.js";import"../sb-preview/runtime.js";import"./createIsland-fzL0F2Ul.js";import"./Input.view-CYHOxHNy.js";import"./Label-DSHguxSj.js";import"./bem-DSWMYwqE.js";import"./Input-Bo2Gm_f0.js";import"./Select-lOHv4d4O.js";import"./Slider-CAxpMkI_.js";import"./Switch-BPCiCr0-.js";import"./Icon-BKsE6VgJ.js";import"./GridRow-CenGc-nn.js";import"./List-hjCH4Dyj.js";import"./Card-CxTtFL7z.js";import"./Animated-DQPbM617.js";import"./Skeleton-CpnmdvhB.js";import"./Image-P5NCFX4N.js";import"./Link-BHzACudg.js";import"./Link.server-9OKSc6GU.js";import"./BaseLink.server-BRG_yKpR.js";import"./Button-C9XyeX5h.js";import"./Headline-Cjx10stz.js";import"./AnimatedText-DRAM74UD.js";const f=i.memo(g=>{const{disabled:v,fields:C,defaultFields:m,messages:d,onSubmit:p,onChangeForm:y,messagesFields:c,hideResponse:F,...V}=g;const[o,x]=i.useState(C??[]);const[T,h]=i.useState(d);const[S,_]=i.useState("");i.useEffect(()=>{if(d!==void 0){h(d)}},[d]);const s=i.useCallback((e,r)=>{x(n=>{const t=[...n];t[e]={...t[e],...r};return t});if(y){y({...o[e],...r})}},[o,y]);const k=i.useCallback((e,r)=>{if(e.errorText===r){return}const n=o.findIndex(t=>(t==null?void 0:t.name)===(e==null?void 0:e.name));if(n<0)return;s(n,{errorText:r});h(t=>{const a={...(t==null?void 0:t.errors)??{}};if(q(r)){a[e.label??""]=[r]}else{delete a[e.label??""]}return{errors:Object.keys(a).length>0?a:void 0}})},[o,s]);const E=i.useCallback((e,r)=>{const n=o.findIndex(a=>a.name===e.name);if(n<0)return;if(e.fieldType==="dynamic-list"){s(n,{value:r});return}if(!e.conditions||e.conditions.length===0){s(n,{value:r});return}m==null?void 0:m.forEach(a=>{var l;if(Boolean((l=a.conditions)==null?void 0:l.some(u=>u.fieldId===e.name))){const u=o.findIndex(B=>B.name===a.name);if(u>=0)s(u,a)}});const t=(e.conditions??[]).filter(a=>{if(r===void 0||a.equalTo===void 0)return true;if(typeof a.equalTo==="boolean"&&a.equalTo===r){return true}if(typeof a.equalTo==="string"){return a.equalTo===r}if(Array.isArray(a.equalTo)&&typeof r==="string"){return a.equalTo.includes(r)}return false});t.forEach(a=>{const l=o.findIndex(u=>u.name===a.fieldId);if(l>=0){s(l,a.updateProps)}});s(n,{value:r})},[m,o,s]);const I=i.useCallback(e=>{_(e.target.value)},[]);const b=i.useCallback(()=>{const e={};o.forEach(r=>{var n,t,a,l;if(Boolean(r.required)&&(r.value===void 0||r.value===""||Array.isArray(r.value)&&r.value.length===0)&&r.visible!==false){const u=((t=(n=c==null?void 0:c.errors)==null?void 0:n.input)==null?void 0:t["required"])??"This field is required";if(!e[r.label??""]){e[r.label??""]=[]}(a=e[r.label??""])==null?void 0:a.push(u)}if(q(r.errorText)){if(!e[r.label??""]){e[r.label??""]=[]}(l=e[r.label??""])==null?void 0:l.push(r.errorText)}});return{errors:Object.keys(e).length>0?e:void 0}},[o,c]);const H=i.useCallback(e=>{e.preventDefault();const{errors:r}=b();h({errors:r});if(!r){p==null?void 0:p(o)}},[o,p,b]);const M=i.useMemo(()=>{if(Boolean(F)){return o.every(e=>{if(Boolean(e.required)&&e.value===void 0&&Boolean(e.visible)!==false){return false}return true})}return true},[o,F]);return j.jsx(A,{...V,disabled:v,formMessages:T,formState:o,isFormValid:M,isHoneypotEmpty:S.length===0,fieldProps:{onChange:E,onValidate:k},honeypot:{defaultValue:"",onChange:I,autoComplete:"off"},onFormSubmit:H})});f.displayName="FormClient";try{f.displayName="FormClient";f.__docgenInfo={"description":"","displayName":"FormClient","props":{"label":{"defaultValue":null,"description":"","name":"label","required":true,"type":{"name":"string"}},"disabled":{"defaultValue":null,"description":"","name":"disabled","required":false,"type":{"name":"boolean"}},"variant":{"defaultValue":null,"description":"","name":"variant","required":false,"type":{"name":"enum","value":[{"value":'"inherit"'},{"value":'"primary"'},{"value":'"secondary"'},{"value":'"success"'},{"value":'"error"'},{"value":'"info"'},{"value":'"warning"'}]}},"hideResponse":{"defaultValue":null,"description":"","name":"hideResponse","required":false,"type":{"name":"boolean"}},"fields":{"defaultValue":null,"description":"","name":"fields","required":false,"type":{"name":"FormField[]"}},"hideHeadline":{"defaultValue":null,"description":"","name":"hideHeadline","required":false,"type":{"name":"boolean"}},"headlineProps":{"defaultValue":null,"description":"","name":"headlineProps","required":false,"type":{"name":"HeadlineProps"}},"defaultFields":{"defaultValue":null,"description":"","name":"defaultFields","required":false,"type":{"name":"FormField[]"}},"messages":{"defaultValue":null,"description":"","name":"messages","required":false,"type":{"name":"FormMessages"}},"messagesFields":{"defaultValue":null,"description":"","name":"messagesFields","required":false,"type":{"name":"FormFieldMessages"}},"button":{"defaultValue":null,"description":"","name":"button","required":false,"type":{"name":"FormButton"}},"onSubmit":{"defaultValue":null,"description":"","name":"onSubmit","required":false,"type":{"name":"((fields: FormField[]) => void)"}},"onChangeForm":{"defaultValue":null,"description":"","name":"onChangeForm","required":false,"type":{"name":"OnChangeFormHandler"}}}}}catch(g){}const fe=P({name:"Form",Client:f,Server:R});export{fe as default};
