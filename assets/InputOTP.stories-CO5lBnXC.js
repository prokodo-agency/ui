var Z=Object.defineProperty;var s=(n,f)=>Z(n,"name",{value:f,configurable:true});import{j as u}from"./jsx-runtime-CGXnEs--.js";import{r as i}from"./index-Dko9tpwX.js";import{c as ee}from"./bem-DSWMYwqE.js";import{I as te}from"./Input-DmWGefGI.js";const re={"prokodo-InputOTP":"prokodo-InputOTP","prokodo-InputOTP__label":"prokodo-InputOTP__label","prokodo-InputOTP__instruction":"prokodo-InputOTP__instruction","prokodo-InputOTP__field":"prokodo-InputOTP__field","prokodo-InputOTP__input":"prokodo-InputOTP__input","prokodo-InputOTP__input__container":"prokodo-InputOTP__input__container","prokodo-InputOTP__input__node":"prokodo-InputOTP__input__node"};const m=ee(re,"InputOTP");const x=i.memo(({className:n,groupLabel:f,groupInstruction:k,length:a=6,onComplete:p,onChange:P,...C})=>{const[K,O]=i.useState(()=>Array(a).fill(""));const b=i.useRef([]);i.useEffect(()=>{b.current=b.current.slice(0,a);O(r=>{const e=Array(a).fill("");for(let t=0;t<Math.min(r.length,a);t++)e[t]=r[t]??"";return e})},[a]);const V=i.useRef(false);const d=i.useCallback(r=>{var t;const e=b.current[r];if(e){e.focus();(t=e.setSelectionRange)==null?void 0:t.call(e,0,e.value.length)}},[]);const g=i.useCallback(r=>{const e=r.join("");P==null?void 0:P(e);const t=r.every(l=>l!=="");if(t&&!V.current){V.current=true;p==null?void 0:p(e)}else if(!t&&V.current){V.current=false}},[P,p]);const E=i.useCallback((r,e)=>{const t=r.replace(/\D/g,"");if(t.length>1)return;O(l=>{if(l[e]===t)return l;const o=[...l];o[e]=t;if(t!==""&&e<a-1){const y=o.findIndex((X,Y)=>Y>e&&X==="");const c=y!==-1?y:e+1;d(c)}g(o);return o})},[g,d,a]);const W=i.useCallback((r,e)=>{E(r.target.value,e)},[E]);const G=i.useCallback((r,e)=>{const{key:t}=r;if(t==="Backspace"){r.preventDefault();O(l=>{const o=[...l];if(o[e]!==""){o[e]="";d(e)}else if(e>0){o[e-1]="";d(e-1)}g(o);return o});return}if(t==="ArrowLeft"){r.preventDefault();if(e>0)d(e-1);return}if(t==="ArrowRight"){r.preventDefault();if(e<a-1)d(e+1);return}if(t==="Home"){r.preventDefault();d(0);return}if(t==="End"){r.preventDefault();d(a-1);return}if(t.length===1&&!/[0-9]/.test(t)){r.preventDefault()}},[g,d,a]);const J=i.useCallback(r=>{var t;const e=b.current[r];(t=e==null?void 0:e.setSelectionRange)==null?void 0:t.call(e,0,e.value.length)},[]);const Q=i.useCallback(r=>{r.preventDefault();const e=(r.clipboardData.getData("text")||"").replace(/\D/g,"").slice(0,a).split("");if(e.length===0)return;O(t=>{const l=[...t];let o=l.findIndex(c=>c==="");if(o===-1)o=0;for(let c=0;c<e.length&&o<a;c++){l[o]=e[c];o++}g(l);const y=l.findIndex(c=>c==="");d(y===-1?a-1:y);return l})},[g,d,a]);return u.jsxs("div",{"aria-describedby":"otp-instructions","aria-labelledby":"otp-group-label",className:m(void 0,void 0,n),role:"group",onPaste:Q,children:[u.jsx("span",{className:m("label"),id:"otp-group-label",children:f??"Enter your OTP"}),u.jsx("span",{className:m("instruction"),id:"otp-instructions",children:k??"Use the arrow keys to navigate between digits."}),K.map((r,e)=>u.jsx(te,{...C,hideCounter:true,"aria-label":`${(C==null?void 0:C["aria-label"])??"OTP digit"} ${e+1}`,autoComplete:"one-time-code",className:m("input"),fieldClassName:m("field"),inputClassName:m("input__node"),inputContainerClassName:m("input__container"),inputMode:"numeric",maxLength:1,name:`otp-${e}`,pattern:"\\\\d*",placeholder:"•",type:"text",value:r,inputRef:s(t=>{b.current[e]=t??null},"inputRef"),onFocus:s(()=>J(e),"onFocus"),onChange:s(t=>W(t,e),"onChange"),onKeyDown:s(t=>G(t,e),"onKeyDown")},`otp-${e}`))]})});x.displayName="InputOTP";try{x.displayName="InputOTP";x.__docgenInfo={"description":"","displayName":"InputOTP","props":{"onFocus":{"defaultValue":null,"description":"Fires when field gains focus.","name":"onFocus","required":false,"type":{"name":"(InputFocusEventHandler & FocusEventHandler<HTMLInputElement> & FocusEventHandler<HTMLTextAreaElement>)"}},"onBlur":{"defaultValue":null,"description":"Fires when field loses focus (blur).","name":"onBlur","required":false,"type":{"name":"(InputBlurEventHandler & FocusEventHandler<HTMLInputElement> & FocusEventHandler<HTMLTextAreaElement>)"}},"type":{"defaultValue":null,"description":"HTML input type (text, email, tel, url, number, password, color, etc.).\nNot applicable for textarea (ignored).","name":"type","required":false,"type":{"name":"FieldType"}},"disabled":{"defaultValue":null,"description":"Disable input (grayed out, no interaction). Aria-disabled=true.","name":"disabled","required":false,"type":{"name":"boolean"}},"label":{"defaultValue":null,"description":"Label text. If omitted, no label element is rendered.","name":"label","required":false,"type":{"name":"string"}},"value":{"defaultValue":null,"description":"Current field value. Controlled component.","name":"value","required":false,"type":{"name":"string | number"}},"required":{"defaultValue":null,"description":"Mark as required. Shows asterisk in label and enforces validation.","name":"required","required":false,"type":{"name":"boolean"}},"fullWidth":{"defaultValue":null,"description":"Width: 100% of parent. Default: false (auto width).","name":"fullWidth","required":false,"type":{"name":"boolean"}},"inputClassName":{"defaultValue":null,"description":"Input/textarea element class name.","name":"inputClassName","required":false,"type":{"name":"string"}},"min":{"defaultValue":null,"description":"Minimum value (number inputs) or length (text). Triggers min error message.","name":"min","required":false,"type":{"name":"string | number"}},"max":{"defaultValue":null,"description":"Maximum value (number inputs) or length (text). Triggers max error message.","name":"max","required":false,"type":{"name":"string | number"}},"errorText":{"defaultValue":null,"description":"Custom error message. Overrides auto-generated errors. Shows red text below field.","name":"errorText","required":false,"type":{"name":"string"}},"helperText":{"defaultValue":null,"description":"Helper text below field (gray, informational). Not an error.","name":"helperText","required":false,"type":{"name":"string"}},"labelProps":{"defaultValue":null,"description":"Label props (className, variant, etc.). Passed to Label component.","name":"labelProps","required":false,"type":{"name":'Omit<LabelProps, "htmlFor" | "label" | "required" | "error">'}},"maxLength":{"defaultValue":null,"description":"Max character count (text inputs). Shows counter if not `hideCounter=true`.","name":"maxLength","required":false,"type":{"name":"number"}},"errorTranslations":{"defaultValue":null,"description":"Validation error messages per type. Falls back to defaults if not provided.","name":"errorTranslations","required":false,"type":{"name":"InputErrorTranslations"}},"isFocused":{"defaultValue":null,"description":"Auto-focus on mount. Useful for modal/dialog first field.","name":"isFocused","required":false,"type":{"name":"boolean"}},"inputRef":{"defaultValue":null,"description":"Ref to underlying input element. Use for imperative access (focus, blur, value reset).","name":"inputRef","required":false,"type":{"name":"Ref<HTMLInputElement>"}},"customRegexPattern":{"defaultValue":null,"description":"Custom regex pattern for validation. Overrides type-based validation.","name":"customRegexPattern","required":false,"type":{"name":"string"}},"fieldClassName":{"defaultValue":null,"description":"Field wrapper class name (outer container).","name":"fieldClassName","required":false,"type":{"name":"string"}},"hideCounter":{"defaultValue":null,"description":"Hide character count indicator (default: false). Only applies to multiline fields.","name":"hideCounter","required":false,"type":{"name":"boolean"}},"inputContainerClassName":{"defaultValue":null,"description":"Input container class name. Direct parent of input/textarea element.","name":"inputContainerClassName","required":false,"type":{"name":"string"}},"hideLegend":{"defaultValue":null,"description":"Hide label legend/fieldset. Useful for icon-only or placeholder-only inputs.","name":"hideLegend","required":false,"type":{"name":"boolean"}},"onValidate":{"defaultValue":null,"description":"Fires after change event. Receives field name and error (if validation fails).","name":"onValidate","required":false,"type":{"name":"InputValidateEvent"}},"renderNode":{"defaultValue":null,"description":"Render a custom field node instead of native input/textarea.\nKeeps label/footer/error/counter layout intact.\nUseful for date pickers, code editors, rich text, or specialized inputs.\nMust manage its own value and change events via `id` and `describedBy`.","name":"renderNode","required":false,"type":{"name":"((args: InputRenderNodeArgs) => ReactNode)"}},"groupLabel":{"defaultValue":null,"description":"Accessible group label for the OTP inputs.","name":"groupLabel","required":false,"type":{"name":"string"}},"groupInstruction":{"defaultValue":null,"description":"Helper text displayed with the group.","name":"groupInstruction","required":false,"type":{"name":"string"}},"length":{"defaultValue":null,"description":"Number of OTP digits (default depends on component).","name":"length","required":false,"type":{"name":"number"}},"onChange":{"defaultValue":null,"description":"Called on every change with the current OTP string.","name":"onChange","required":false,"type":{"name":"((otp: string) => void)"}},"onComplete":{"defaultValue":null,"description":"Called when all digits are filled.","name":"onComplete","required":false,"type":{"name":"((otp: string) => void)"}}}}}catch(n){}const ne={title:"prokodo/form/InputOTP",component:x,parameters:{layout:"centered",docs:{description:{component:"Accessible one-time password (OTP) / PIN input. Arrow-key navigation, paste support, and keyboard-only digit entry. Calls `onComplete` when all digits are filled."}}},argTypes:{length:{control:{type:"number",min:4,max:8,step:1}},groupLabel:{control:"text"},groupInstruction:{control:"text"},disabled:{control:"boolean"},required:{control:"boolean"},onChange:{action:"changed",table:{disable:true}},onComplete:{action:"completed",table:{disable:true}},className:{table:{disable:true}}}};function q(n){const[f,k]=i.useState("");return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center"},children:[u.jsx(x,{...n,onChange:s(a=>{var p;k(a);(p=n.onChange)==null?void 0:p.call(n,a)},"onChange"),onComplete:s(a=>{var p;(p=n.onComplete)==null?void 0:p.call(n,a)},"onComplete")}),f.length>0&&u.jsxs("p",{style:{fontFamily:"var(--font-secondary)",fontSize:13,opacity:.7},children:["Current value: ",u.jsx("strong",{children:f||"—"})]})]})}s(q,"Controlled");const h={args:{length:6,groupLabel:"One-time password",groupInstruction:"Enter the 6-digit code sent to your device."},render:s(n=>u.jsx(q,{...n}),"render")};const I={args:{length:4,groupLabel:"PIN",groupInstruction:"Enter your 4-digit PIN."},render:s(n=>u.jsx(q,{...n}),"render")};const v={args:{length:8,groupLabel:"Security code",groupInstruction:"Enter the 8-digit security code."},render:s(n=>u.jsx(q,{...n}),"render")};const T={args:{length:6,disabled:true,groupLabel:"One-time password",groupInstruction:"Input is disabled."},render:s(n=>u.jsx(q,{...n}),"render")};const _={args:{length:6,required:true,groupLabel:"Required OTP",groupInstruction:"This field is required."},render:s(n=>u.jsx(q,{...n}),"render")};var N,L,w;h.parameters={...h.parameters,docs:{...(N=h.parameters)==null?void 0:N.docs,source:{originalSource:'{\n  args: {\n    length: 6,\n    groupLabel: "One-time password",\n    groupInstruction: "Enter the 6-digit code sent to your device."\n  },\n  render: args => <Controlled {...args} />\n}',...(w=(L=h.parameters)==null?void 0:L.docs)==null?void 0:w.source}}};var D,R,F;I.parameters={...I.parameters,docs:{...(D=I.parameters)==null?void 0:D.docs,source:{originalSource:'{\n  args: {\n    length: 4,\n    groupLabel: "PIN",\n    groupInstruction: "Enter your 4-digit PIN."\n  },\n  render: args => <Controlled {...args} />\n}',...(F=(R=I.parameters)==null?void 0:R.docs)==null?void 0:F.source}}};var j,S,H;v.parameters={...v.parameters,docs:{...(j=v.parameters)==null?void 0:j.docs,source:{originalSource:'{\n  args: {\n    length: 8,\n    groupLabel: "Security code",\n    groupInstruction: "Enter the 8-digit security code."\n  },\n  render: args => <Controlled {...args} />\n}',...(H=(S=v.parameters)==null?void 0:S.docs)==null?void 0:H.source}}};var M,A,B;T.parameters={...T.parameters,docs:{...(M=T.parameters)==null?void 0:M.docs,source:{originalSource:'{\n  args: {\n    length: 6,\n    disabled: true,\n    groupLabel: "One-time password",\n    groupInstruction: "Input is disabled."\n  },\n  render: args => <Controlled {...args} />\n}',...(B=(A=T.parameters)==null?void 0:A.docs)==null?void 0:B.source}}};var U,$,z;_.parameters={..._.parameters,docs:{...(U=_.parameters)==null?void 0:U.docs,source:{originalSource:'{\n  args: {\n    length: 6,\n    required: true,\n    groupLabel: "Required OTP",\n    groupInstruction: "This field is required."\n  },\n  render: args => <Controlled {...args} />\n}',...(z=($=_.parameters)==null?void 0:$.docs)==null?void 0:z.source}}};const ae=["Default","FourDigit","EightDigit","Disabled","Required"];const de=Object.freeze(Object.defineProperty({__proto__:null,Default:h,Disabled:T,EightDigit:v,FourDigit:I,Required:_,__namedExportsOrder:ae,default:ne},Symbol.toStringTag,{value:"Module"}));export{h as D,v as E,I as F,de as I,_ as R,T as a};
