import{r as d}from"./index-Bw_7RdAX.js";import{u as X,e as Z,g as ee,a as te,b as q,c as ne,d as re}from"./index-10Z1LnwP.js";import{j as S}from"./jsx-runtime-D_zvdyIk.js";import{o as k,u as H}from"./useEventCallback-CJZobY21.js";import{g as oe,P as se}from"./Portal-BbMdSWL-.js";function z(...e){return e.reduce((t,r)=>r==null?t:function(...s){t.apply(this,s),r.apply(this,s)},()=>{})}function Y(e){return k(e).defaultView||window}function ie(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const ae=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function ce(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function le(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=n=>e.ownerDocument.querySelector(`input[type="radio"]${n}`);let r=t(`[name="${e.name}"]:checked`);return r||(r=t(`[name="${e.name}"]`)),r!==e}function ue(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||le(e))}function de(e){const t=[],r=[];return Array.from(e.querySelectorAll(ae)).forEach((n,s)=>{const o=ce(n);o===-1||!ue(n)||(o===0?t.push(n):r.push({documentOrder:s,tabIndex:o,node:n}))}),r.sort((n,s)=>n.tabIndex===s.tabIndex?n.documentOrder-s.documentOrder:n.tabIndex-s.tabIndex).map(n=>n.node).concat(t)}function fe(){return!0}function pe(e){const{children:t,disableAutoFocus:r=!1,disableEnforceFocus:n=!1,disableRestoreFocus:s=!1,getTabbable:o=de,isEnabled:i=fe,open:u}=e,f=d.useRef(!1),E=d.useRef(null),b=d.useRef(null),m=d.useRef(null),x=d.useRef(null),g=d.useRef(!1),c=d.useRef(null),D=X(oe(t),c),w=d.useRef(null);d.useEffect(()=>{!u||!c.current||(g.current=!r)},[r,u]),d.useEffect(()=>{if(!u||!c.current)return;const a=k(c.current);return c.current.contains(a.activeElement)||(c.current.hasAttribute("tabIndex")||c.current.setAttribute("tabIndex","-1"),g.current&&c.current.focus()),()=>{s||(m.current&&m.current.focus&&(f.current=!0,m.current.focus()),m.current=null)}},[u]),d.useEffect(()=>{if(!u||!c.current)return;const a=k(c.current),P=h=>{w.current=h,!(n||!i()||h.key!=="Tab")&&a.activeElement===c.current&&h.shiftKey&&(f.current=!0,b.current&&b.current.focus())},y=()=>{var A,v;const h=c.current;if(h===null)return;if(!a.hasFocus()||!i()||f.current){f.current=!1;return}if(h.contains(a.activeElement)||n&&a.activeElement!==E.current&&a.activeElement!==b.current)return;if(a.activeElement!==x.current)x.current=null;else if(x.current!==null)return;if(!g.current)return;let R=[];if((a.activeElement===E.current||a.activeElement===b.current)&&(R=o(c.current)),R.length>0){const L=!!((A=w.current)!=null&&A.shiftKey&&((v=w.current)==null?void 0:v.key)==="Tab"),F=R[0],M=R[R.length-1];typeof F!="string"&&typeof M!="string"&&(L?M.focus():F.focus())}else h.focus()};a.addEventListener("focusin",y),a.addEventListener("keydown",P,!0);const O=setInterval(()=>{a.activeElement&&a.activeElement.tagName==="BODY"&&y()},50);return()=>{clearInterval(O),a.removeEventListener("focusin",y),a.removeEventListener("keydown",P,!0)}},[r,n,s,i,u,o]);const I=a=>{m.current===null&&(m.current=a.relatedTarget),g.current=!0,x.current=a.target;const P=t.props.onFocus;P&&P(a)},N=a=>{m.current===null&&(m.current=a.relatedTarget),g.current=!0};return S.jsxs(d.Fragment,{children:[S.jsx("div",{tabIndex:u?0:-1,onFocus:N,ref:E,"data-testid":"sentinelStart"}),d.cloneElement(t,{ref:D,onFocus:I}),S.jsx("div",{tabIndex:u?0:-1,onFocus:N,ref:b,"data-testid":"sentinelEnd"})]})}function be(e){const t=k(e);return t.body===e?Y(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function K(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function G(e){return parseInt(Y(e).getComputedStyle(e).paddingRight,10)||0}function he(e){const r=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,n=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return r||n}function V(e,t,r,n,s){const o=[t,r,...n];[].forEach.call(e.children,i=>{const u=o.indexOf(i)===-1,f=!he(i);u&&f&&K(i,s)})}function $(e,t){let r=-1;return e.some((n,s)=>t(n)?(r=s,!0):!1),r}function me(e,t){const r=[],n=e.container;if(!t.disableScrollLock){if(be(n)){const i=ie(k(n));r.push({value:n.style.paddingRight,property:"padding-right",el:n}),n.style.paddingRight=`${G(n)+i}px`;const u=k(n).querySelectorAll(".mui-fixed");[].forEach.call(u,f=>{r.push({value:f.style.paddingRight,property:"padding-right",el:f}),f.style.paddingRight=`${G(f)+i}px`})}let o;if(n.parentNode instanceof DocumentFragment)o=k(n).body;else{const i=n.parentElement,u=Y(n);o=(i==null?void 0:i.nodeName)==="HTML"&&u.getComputedStyle(i).overflowY==="scroll"?i:n}r.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return()=>{r.forEach(({value:o,el:i,property:u})=>{o?i.style.setProperty(u,o):i.style.removeProperty(u)})}}function ge(e){const t=[];return[].forEach.call(e.children,r=>{r.getAttribute("aria-hidden")==="true"&&t.push(r)}),t}class Ee{constructor(){this.modals=[],this.containers=[]}add(t,r){let n=this.modals.indexOf(t);if(n!==-1)return n;n=this.modals.length,this.modals.push(t),t.modalRef&&K(t.modalRef,!1);const s=ge(r);V(r,t.mount,t.modalRef,s,!0);const o=$(this.containers,i=>i.container===r);return o!==-1?(this.containers[o].modals.push(t),n):(this.containers.push({modals:[t],container:r,restore:null,hiddenSiblings:s}),n)}mount(t,r){const n=$(this.containers,o=>o.modals.indexOf(t)!==-1),s=this.containers[n];s.restore||(s.restore=me(s,r))}remove(t,r=!0){const n=this.modals.indexOf(t);if(n===-1)return n;const s=$(this.containers,i=>i.modals.indexOf(t)!==-1),o=this.containers[s];if(o.modals.splice(o.modals.indexOf(t),1),this.modals.splice(n,1),o.modals.length===0)o.restore&&o.restore(),t.modalRef&&K(t.modalRef,r),V(o.container,t.mount,t.modalRef,o.hiddenSiblings,!1),this.containers.splice(s,1);else{const i=o.modals[o.modals.length-1];i.modalRef&&K(i.modalRef,!1)}return n}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function xe(e){return typeof e=="function"?e():e}function ye(e){return e?e.props.hasOwnProperty("in"):!1}const Re=new Ee;function Te(e){const{container:t,disableEscapeKeyDown:r=!1,disableScrollLock:n=!1,manager:s=Re,closeAfterTransition:o=!1,onTransitionEnter:i,onTransitionExited:u,children:f,onClose:E,open:b,rootRef:m}=e,x=d.useRef({}),g=d.useRef(null),c=d.useRef(null),D=X(c,m),[w,I]=d.useState(!b),N=ye(f);let a=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(a=!1);const P=()=>k(g.current),y=()=>(x.current.modalRef=c.current,x.current.mount=g.current,x.current),O=()=>{s.mount(y(),{disableScrollLock:n}),c.current&&(c.current.scrollTop=0)},h=H(()=>{const p=xe(t)||P().body;s.add(y(),p),c.current&&O()}),R=d.useCallback(()=>s.isTopModal(y()),[s]),A=H(p=>{g.current=p,p&&(b&&R()?O():c.current&&K(c.current,a))}),v=d.useCallback(()=>{s.remove(y(),a)},[a,s]);d.useEffect(()=>()=>{v()},[v]),d.useEffect(()=>{b?h():(!N||!o)&&v()},[b,v,N,o,h]);const L=p=>l=>{var T;(T=p.onKeyDown)==null||T.call(p,l),!(l.key!=="Escape"||l.which===229||!R())&&(r||(l.stopPropagation(),E&&E(l,"escapeKeyDown")))},F=p=>l=>{var T;(T=p.onClick)==null||T.call(p,l),l.target===l.currentTarget&&E&&E(l,"backdropClick")};return{getRootProps:(p={})=>{const l=Z(e);delete l.onTransitionEnter,delete l.onTransitionExited;const T={...l,...p};return{role:"presentation",...T,onKeyDown:L(T),ref:D}},getBackdropProps:(p={})=>{const l=p;return{"aria-hidden":!0,...l,onClick:F(l),open:b}},getTransitionProps:()=>{const p=()=>{I(!1),i&&i()},l=()=>{I(!0),u&&u(),o&&v()};return{onEnter:z(p,f==null?void 0:f.props.onEnter),onExited:z(l,f==null?void 0:f.props.onExited)}},rootRef:D,portalRef:A,isTopModal:R,exited:w,hasTransition:N}}const _="Modal";function Pe(e){return te(_,e)}ee(_,["root","hidden","backdrop"]);const ve=e=>{const{open:t,exited:r}=e;return ne({root:["root",!t&&r&&"hidden"],backdrop:["backdrop"]},re(Pe))},we=d.forwardRef(function(t,r){const{children:n,closeAfterTransition:s=!1,container:o,disableAutoFocus:i=!1,disableEnforceFocus:u=!1,disableEscapeKeyDown:f=!1,disablePortal:E=!1,disableRestoreFocus:b=!1,disableScrollLock:m=!1,hideBackdrop:x=!1,keepMounted:g=!1,onBackdropClick:c,onClose:D,onKeyDown:w,open:I,onTransitionEnter:N,onTransitionExited:a,slotProps:P={},slots:y={},...O}=t,h={...t,closeAfterTransition:s,disableAutoFocus:i,disableEnforceFocus:u,disableEscapeKeyDown:f,disablePortal:E,disableRestoreFocus:b,disableScrollLock:m,hideBackdrop:x,keepMounted:g},{getRootProps:R,getBackdropProps:A,getTransitionProps:v,portalRef:L,isTopModal:F,exited:M,hasTransition:U}=Te({...h,rootRef:r}),j={...h,exited:M,hasTransition:U},p=ve(j),l={};if(n.props.tabIndex===void 0&&(l.tabIndex="-1"),U){const{onEnter:C,onExited:B}=v();l.onEnter=C,l.onExited=B}const T=y.root??"div",J=q({elementType:T,externalSlotProps:P.root,externalForwardedProps:O,getSlotProps:R,className:p.root,ownerState:j}),W=y.backdrop,Q=q({elementType:W,externalSlotProps:P.backdrop,getSlotProps:C=>A({...C,onClick:B=>{c&&c(B),C!=null&&C.onClick&&C.onClick(B)}}),className:p.backdrop,ownerState:j});return!g&&!I&&(!U||M)?null:S.jsx(se,{ref:L,container:o,disablePortal:E,children:S.jsxs(T,{...J,children:[!x&&W?S.jsx(W,{...Q}):null,S.jsx(pe,{disableEnforceFocus:u,disableAutoFocus:i,disableRestoreFocus:b,isEnabled:F,open:I,children:d.cloneElement(n,l)})]})})});export{we as M};
